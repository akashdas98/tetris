(()=>{"use strict";const t=function(t,o){void 0===o&&(o=30);var r=this;this.drawTile=function(t,o,e){r.ctx.fillStyle=e,r.ctx.strokeStyle="#000000",r.ctx.globalAlpha=1,r.ctx.fillRect(t*r.scale,o*r.scale,r.scale,r.scale),r.ctx.globalAlpha=.5,r.ctx.strokeRect(t*r.scale,o*r.scale,r.scale,r.scale)},this.drawPiece=function(t){var o=t.getPivot,e=t.getColor,n=t.getMatrix,i=o(),a=e();n().forEach((function(t){r.drawTile(t[0]+i[0],t[1]+i[1],a)}))},this.draw=function(){r.clear();for(var t=0;t<20;t++)for(var o=0;o<10;o++){var e=r.matrix[t][o];1===e.value&&r.drawTile(o,t,e.color)}},this.getMatrix=function(){return r.matrix},this.getCtx=function(){return r.ctx},this.clear=function(){return r.ctx.clearRect(0,0,r.canvas.width,r.canvas.height)},this.clearLine=function(){for(var t=[],o=19;o>=0;o--)r.matrix[o].every((function(t){return 1===t.value}))&&t.push(o);for(var e=t.length-1;e>=0;e--){for(o=t[e];o>0;o--)r.matrix[o]=r.matrix[o-1];r.matrix[0]=Array.from({length:10},(function(){return{value:0,color:null}}))}t.length>0&&r.draw()},this.maxHeightReached=function(){return r.matrix[0].some((function(t){return 1===t.value}))},this.addToStack=function(t){t.getMatrix().forEach((function(o){var e,n=t.getPivot(),i=null===(e=r.matrix[o[1]+n[1]])||void 0===e?void 0:e[o[0]+n[0]];i&&(i.value=1,i.color=t.getColor())}))},this.canvas=t,this.ctx=t.getContext("2d"),this.scale=o,this.canvas.height=20*this.scale,this.canvas.width=10*this.scale,this.matrix=Array.from({length:20},(function(){return Array.from({length:10},(function(){return{value:0,color:null}}))}))},o=function(){function t(t){var o=t.matrix,r=t.pivot,e=t.id,n=t.color,i=this;this.setPivot=function(t,o){i.pivot=[t,o]},this.getPivot=function(){return i.pivot},this.getMatrix=function(){return i.matrix},this.getColor=function(){return i.color},this.rotate=function(t,o){if("O"!==i.id){var r=i.getRotationMatrix(t),e=i.matrix.map((function(t){return e=t,[(o=r)[0][0]*e[0]+o[0][1]*e[1],o[1][0]*e[0]+o[1][1]*e[1]];var o,e}));i.changeOrientation(t);for(var n=!1,a=0,c=i.kickData[i.orientation];a<c.length;a++){var u=c[a],s=u[0],l=u[1];if(!i.checkKick(s,l,e,o)){i.doKick(s,l,e,t),n=!0;break}}n||i.changeOrientation(0===t?1:0)}},this.matrix=o,this.pivot=r,this.id=e,this.color=n,this.orientation=0,this.kickData=[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[0,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]]}return t.prototype.getRotationMatrix=function(t){return 0===t?[[0,1],[-1,0]]:[[0,-1],[1,0]]},t.prototype.checkKick=function(t,o,r,e){for(var n,i,a=!1,c=0;c<r.length;c++){if(r[c][0]+this.pivot[0]+t<0||r[c][0]+this.pivot[0]+t>9||r[c][1]+this.pivot[1]+o<0||r[c][1]+this.pivot[1]+o>19){a=!0;break}if(1===(null===(i=null===(n=e[r[c][1]+this.pivot[1]+o])||void 0===n?void 0:n[r[c][0]+this.pivot[0]+t])||void 0===i?void 0:i.value)){a=!0;break}}return a},t.prototype.doKick=function(t,o,r,e){this.matrix=r,this.pivot[0]+=t,this.pivot[1]+=o,this.changeOrientation(e)},t.prototype.changeOrientation=function(t){this.orientation=1==t?((this.orientation+1)%4+4)%4:((this.orientation-1)%4+4)%4},t}();var r,e=(r=function(t,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])},r(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});const n=function(t){function o(o,r){return t.call(this,{id:"T",color:"#ff00ff",pivot:[o,r],matrix:[[0,-1],[-1,0],[0,0],[1,0]]})||this}return e(o,t),o}(o);var i=function(){var t=function(o,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])},t(o,r)};return function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();const a=function(t){function o(o,r){var e=this;return(e=t.call(this,{id:"I",color:"#00ffff",pivot:[o,r],matrix:[[-1.5,.5],[-.5,.5],[.5,.5],[1.5,.5]]})||this).kickData=[[[0,0],[-1,0],[2,0],[-1,0],[2,0]],[[-1,0],[0,0],[0,0],[0,1],[0,-2]],[[-1,1],[1,1],[-2,1],[1,0],[-2,0]],[[0,1],[0,1],[0,1],[0,-1],[0,2]]],e}return i(o,t),o}(o);var c=function(){var t=function(o,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])},t(o,r)};return function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();const u=function(t){function o(o,r){var e=this;return(e=t.call(this,{id:"O",color:"#ffff00",pivot:[o,r],matrix:[[-1,0],[0,0],[-1,-1],[0,-1]]})||this).rotate=function(){},e}return c(o,t),o}(o);var s=function(){var t=function(o,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])},t(o,r)};return function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();const l=function(t){function o(o,r){return t.call(this,{id:"S",color:"#00ff00",pivot:[o,r],matrix:[[-1,0],[0,0],[0,-1],[1,-1]]})||this}return s(o,t),o}(o);var f=function(){var t=function(o,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])},t(o,r)};return function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();const p=function(t){function o(o,r){return t.call(this,{id:"J",color:"#0000ff",pivot:[o,r],matrix:[[-1,0],[0,0],[1,0],[-1,-1]]})||this}return f(o,t),o}(o);var h=function(){var t=function(o,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])},t(o,r)};return function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();const v=function(t){function o(o,r){return t.call(this,{id:"Z",color:"#ff0000",pivot:[o,r],matrix:[[-1,-1],[0,0],[0,-1],[1,0]]})||this}return h(o,t),o}(o);var d=function(){var t=function(o,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])},t(o,r)};return function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();const y=function(t){function o(o,r){return t.call(this,{id:"L",color:"#ff7f00",pivot:[o,r],matrix:[[-1,0],[0,0],[1,0],[1,-1]]})||this}return d(o,t),o}(o);(new(function(){function o(){var o=this;this.history=99,this.normalDrop=100,this.softDrop=50,this.handleKeyDown=function(t){var r=o.board.getMatrix();switch(t.key){case"ArrowLeft":o.tryMove(-1,0);break;case"ArrowRight":o.tryMove(1,0);break;case"ArrowDown":o.startSoftDrop();break;case"ArrowUp":case"c":o.currentPiece.rotate(1,r);break;case" ":o.currentPiece.rotate(0,r);break;default:return}o.redrawGameBoard()},this.handleKeyUp=function(t){"ArrowDown"===t.key&&o.stopSoftDrop()},this.tryMove=function(t,r){var e=o.currentPiece.getMatrix(),n=o.currentPiece.getPivot();e.every((function(e){var i=e[0]+n[0]+t,a=e[1]+n[1]+r;return o.isPositionValid(i,a)}))&&o.currentPiece.setPivot(n[0]+t,n[1]+r)},this.isPositionValid=function(t,r){var e,n,i=o.board.getMatrix();return t>=0&&t<=9&&r<=19&&1!==(null===(n=null===(e=i[r])||void 0===e?void 0:e[t])||void 0===n?void 0:n.value)},this.canDrop=function(){var t=o.board.getMatrix(),r=o.currentPiece.getMatrix(),e=o.currentPiece.getPivot();return r.every((function(o){var r,n,i=o[1]+e[1]+1;return i<=19&&1!==(null===(n=null===(r=t[i])||void 0===r?void 0:r[o[0]+e[0]])||void 0===n?void 0:n.value)}))},this.redrawGameBoard=function(){o.board.draw(),o.board.drawPiece(o.currentPiece)},this.startGame=function(){o.stopped=!1,console.log("STARTED"),o.spawn(),o.startDropLoop()},this.startDropLoop=function(){o.frameRequestHandle=requestAnimationFrame(o.dropLoop)},this.dropLoop=function(t){var r=t-o.lastUpdateTime;for(o.lastUpdateTime=t,o.accumulatedTime+=r;o.accumulatedTime>o.currentSpeed;)o.canDrop()?o.drop():o.timeout||o.queueStop(),o.accumulatedTime-=o.currentSpeed;o.redrawGameBoard(),o.stopped||o.startDropLoop()},this.spawn=function(){o.currentPiece=o.nextPiece,o.nextPiece=o.generateRandomPiece(),o.board.drawPiece(o.currentPiece)},this.drop=function(){var t=o.currentPiece.getPivot();o.currentPiece.setPivot(t[0],t[1]+1),o.redrawGameBoard()},this.queueStop=function(){o.timeout||(console.log("STOPPING"),o.timeout=setTimeout(o.stop,1e3))},this.stop=function(){console.log("STOPPED"),o.clearStopTimeout(),o.canDrop()?console.log("STOP CANCELLED"):(o.clearDropInterval(),o.stopped=!0,console.log("ADDING TO BOARD"),o.board.addToStack(o.currentPiece),console.log("CLEARING LINES"),o.board.clearLine(),o.board.maxHeightReached()?console.log("GAME OVER"):o.startGame())},this.clearDropInterval=function(){o.frameRequestHandle&&(cancelAnimationFrame(o.frameRequestHandle),o.frameRequestHandle=null)},this.clearStopTimeout=function(){o.timeout&&clearTimeout(o.timeout),o.timeout=void 0},this.randomizer=function(){for(var t=Math.floor(7*Math.random());t===o.history;)t=Math.floor(7*Math.random());return o.history=t,t},this.generateRandomPiece=function(){var t;switch(o.randomizer()){case 0:t=new n(5,0);break;case 1:t=new a(4.5,-.5);break;case 2:t=new p(5,0);break;case 3:t=new y(5,0);break;case 4:t=new l(5,0);break;case 5:t=new u(5,0);break;default:t=new v(5,0)}return t},this.lastUpdateTime=window.performance.now(),this.board=new t(document.querySelector("canvas")),this.nextPiece=this.generateRandomPiece(),this.currentPiece=this.generateRandomPiece(),this.currentSpeed=this.normalDrop,this.isSoftDropping=!1,this.accumulatedTime=0,this.frameRequestHandle=null,this.stopped=!0,window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}return o.prototype.startSoftDrop=function(){this.isSoftDropping||(this.currentSpeed=this.softDrop,this.isSoftDropping=!0)},o.prototype.stopSoftDrop=function(){this.currentSpeed=this.normalDrop,this.isSoftDropping=!1},o}())).startGame()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQVUsRUFDZmlDLE9BQU9NLGlCQUFpQixVQUFXL0UsS0FBS3VCLGVBQ3hDa0QsT0FBT00saUJBQWlCLFFBQVMvRSxLQUFLK0IsWUFDeEMsQ0F3TUYsT0FsSlUsWUFBQUgsY0FBUixXQUNPNUIsS0FBSzhFLGlCQUNSOUUsS0FBS29ELGFBQWVwRCxLQUFLc0IsU0FDekJ0QixLQUFLOEUsZ0JBQWlCLEVBRTFCLEVBRVEsWUFBQTlDLGFBQVIsV0FDRWhDLEtBQUtvRCxhQUFlcEQsS0FBS3FCLFdBQ3pCckIsS0FBSzhFLGdCQUFpQixDQUN4QixFQXdJRixFQXJPQSxLRFBLdkMsVyIsInNvdXJjZXMiOlsid2VicGFjazovL3RldHJpcy8uL3NyYy9Cb2FyZC9Cb2FyZC50cyIsIndlYnBhY2s6Ly90ZXRyaXMvLi9zcmMvUGllY2UvUGllY2UudHMiLCJ3ZWJwYWNrOi8vdGV0cmlzLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL3RldHJpcy8uL3NyYy9QaWVjZS9UUGllY2UudHMiLCJ3ZWJwYWNrOi8vdGV0cmlzLy4vc3JjL1BpZWNlL0lQaWVjZS50cyIsIndlYnBhY2s6Ly90ZXRyaXMvLi9zcmMvUGllY2UvT1BpZWNlLnRzIiwid2VicGFjazovL3RldHJpcy8uL3NyYy9QaWVjZS9TUGllY2UudHMiLCJ3ZWJwYWNrOi8vdGV0cmlzLy4vc3JjL1BpZWNlL0pQaWVjZS50cyIsIndlYnBhY2s6Ly90ZXRyaXMvLi9zcmMvUGllY2UvWlBpZWNlLnRzIiwid2VicGFjazovL3RldHJpcy8uL3NyYy9QaWVjZS9MUGllY2UudHMiLCJ3ZWJwYWNrOi8vdGV0cmlzLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3RldHJpcy8uL3NyYy9HYW1lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaWVjZSBmcm9tIFwiLi4vUGllY2UvUGllY2VcIjtcclxuXHJcbmV4cG9ydCB0eXBlIEJvYXJkTWF0cml4ID0geyB2YWx1ZTogbnVtYmVyOyBjb2xvcjogc3RyaW5nIHwgbnVsbCB9W11bXTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvYXJkIHtcclxuICBwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgcHJpdmF0ZSBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICBwcml2YXRlIHNjYWxlOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBtYXRyaXg6IEJvYXJkTWF0cml4O1xyXG5cclxuICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBzY2FsZTogbnVtYmVyID0gMzApIHtcclxuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xyXG4gICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpIGFzIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcclxuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IDIwICogdGhpcy5zY2FsZTtcclxuICAgIHRoaXMuY2FudmFzLndpZHRoID0gMTAgKiB0aGlzLnNjYWxlO1xyXG4gICAgdGhpcy5tYXRyaXggPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyMCB9LCAoKSA9PlxyXG4gICAgICBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMCB9LCAoKSA9PiAoeyB2YWx1ZTogMCwgY29sb3I6IG51bGwgfSkpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkcmF3VGlsZSA9ICh4OiBudW1iZXIsIHk6IG51bWJlciwgY29sb3I6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gY29sb3I7XHJcbiAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IFwiIzAwMDAwMFwiO1xyXG4gICAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSAxO1xyXG4gICAgdGhpcy5jdHguZmlsbFJlY3QoeCAqIHRoaXMuc2NhbGUsIHkgKiB0aGlzLnNjYWxlLCB0aGlzLnNjYWxlLCB0aGlzLnNjYWxlKTtcclxuICAgIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gMC41O1xyXG4gICAgdGhpcy5jdHguc3Ryb2tlUmVjdCh4ICogdGhpcy5zY2FsZSwgeSAqIHRoaXMuc2NhbGUsIHRoaXMuc2NhbGUsIHRoaXMuc2NhbGUpO1xyXG4gIH07XHJcblxyXG4gIHB1YmxpYyBkcmF3UGllY2UgPSAocGllY2U6IFBpZWNlKTogdm9pZCA9PiB7XHJcbiAgICBjb25zdCB7IGdldFBpdm90LCBnZXRDb2xvciwgZ2V0TWF0cml4IH0gPSBwaWVjZTtcclxuICAgIGNvbnN0IHBpdm90ID0gZ2V0UGl2b3QoKTtcclxuICAgIGNvbnN0IGNvbG9yID0gZ2V0Q29sb3IoKTtcclxuICAgIGdldE1hdHJpeCgpLmZvckVhY2goKHRpbGUpID0+IHtcclxuICAgICAgdGhpcy5kcmF3VGlsZSh0aWxlWzBdICsgcGl2b3RbMF0sIHRpbGVbMV0gKyBwaXZvdFsxXSwgY29sb3IpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcHVibGljIGRyYXcgPSAoKTogdm9pZCA9PiB7XHJcbiAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IDIwOyB5KyspIHtcclxuICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCAxMDsgeCsrKSB7XHJcbiAgICAgICAgY29uc3QgY2VsbCA9IHRoaXMubWF0cml4W3ldW3hdO1xyXG4gICAgICAgIGlmIChjZWxsLnZhbHVlID09PSAxKSB7XHJcbiAgICAgICAgICB0aGlzLmRyYXdUaWxlKHgsIHksIGNlbGwuY29sb3IgYXMgc3RyaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwdWJsaWMgZ2V0TWF0cml4ID0gKCk6IEJvYXJkTWF0cml4ID0+IHRoaXMubWF0cml4O1xyXG5cclxuICBwdWJsaWMgZ2V0Q3R4ID0gKCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA9PiB0aGlzLmN0eDtcclxuXHJcbiAgcHVibGljIGNsZWFyID0gKCk6IHZvaWQgPT5cclxuICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgcHVibGljIGNsZWFyTGluZSA9ICgpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IGhlaWdodCA9IDIwO1xyXG4gICAgY29uc3Qgd2lkdGggPSAxMDtcclxuICAgIGxldCBsaW5lc1RvQ2xlYXIgPSBbXTtcclxuXHJcbiAgICAvLyBGaXJzdCwgaWRlbnRpZnkgYWxsIHRoZSBmdWxsIGxpbmVzXHJcbiAgICBmb3IgKGxldCB5ID0gaGVpZ2h0IC0gMTsgeSA+PSAwOyB5LS0pIHtcclxuICAgICAgaWYgKHRoaXMubWF0cml4W3ldLmV2ZXJ5KChjZWxsKSA9PiBjZWxsLnZhbHVlID09PSAxKSkge1xyXG4gICAgICAgIGxpbmVzVG9DbGVhci5wdXNoKHkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTW92ZSBlYWNoIGxpbmUgZG93biBzdGFydGluZyBmcm9tIHRoZSBsb3dlc3QgZnVsbCBsaW5lXHJcbiAgICBmb3IgKGxldCBpID0gbGluZXNUb0NsZWFyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgIGxldCBsaW5lID0gbGluZXNUb0NsZWFyW2ldO1xyXG4gICAgICAvLyBNb3ZlIGFsbCBsaW5lcyBhYm92ZSB0aGlzIG9uZSBkb3duXHJcbiAgICAgIGZvciAobGV0IHkgPSBsaW5lOyB5ID4gMDsgeS0tKSB7XHJcbiAgICAgICAgdGhpcy5tYXRyaXhbeV0gPSB0aGlzLm1hdHJpeFt5IC0gMV07XHJcbiAgICAgIH1cclxuICAgICAgLy8gQ2xlYXIgdGhlIHRvcCByb3dcclxuICAgICAgdGhpcy5tYXRyaXhbMF0gPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiB3aWR0aCB9LCAoKSA9PiAoe1xyXG4gICAgICAgIHZhbHVlOiAwLFxyXG4gICAgICAgIGNvbG9yOiBudWxsLFxyXG4gICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGxpbmVzVG9DbGVhci5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHB1YmxpYyBtYXhIZWlnaHRSZWFjaGVkID0gKCk6IGJvb2xlYW4gPT5cclxuICAgIHRoaXMubWF0cml4WzBdLnNvbWUoKGNlbGwpID0+IGNlbGwudmFsdWUgPT09IDEpO1xyXG5cclxuICBwdWJsaWMgYWRkVG9TdGFjayA9IChwaWVjZTogUGllY2UpID0+IHtcclxuICAgIHBpZWNlLmdldE1hdHJpeCgpLmZvckVhY2goKHRpbGUpID0+IHtcclxuICAgICAgY29uc3QgcGl2b3QgPSBwaWVjZS5nZXRQaXZvdCgpO1xyXG4gICAgICBjb25zdCBjZWxsID0gdGhpcy5tYXRyaXhbdGlsZVsxXSArIHBpdm90WzFdXT8uW3RpbGVbMF0gKyBwaXZvdFswXV07XHJcbiAgICAgIGlmIChjZWxsKSB7XHJcbiAgICAgICAgY2VsbC52YWx1ZSA9IDE7XHJcbiAgICAgICAgY2VsbC5jb2xvciA9IHBpZWNlLmdldENvbG9yKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgQm9hcmRNYXRyaXggfSBmcm9tIFwiLi4vQm9hcmQvQm9hcmRcIjtcclxuaW1wb3J0IHsgbWF0cml4TXVsdGlwbHkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUGllY2VJbnRlcmZhY2Uge1xyXG4gIG1hdHJpeDogbnVtYmVyW11bXTtcclxuICBwaXZvdDogbnVtYmVyW107XHJcbiAgaWQ6IFwiT1wiIHwgXCJJXCIgfCBcIlNcIiB8IFwiWlwiIHwgXCJKXCIgfCBcIkxcIiB8IFwiVFwiO1xyXG4gIGNvbG9yOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFBpZWNlIHtcclxuICBwcm90ZWN0ZWQgbWF0cml4OiBQaWVjZUludGVyZmFjZVtcIm1hdHJpeFwiXTtcclxuICBwcm90ZWN0ZWQgcGl2b3Q6IFBpZWNlSW50ZXJmYWNlW1wicGl2b3RcIl07XHJcbiAgcHJvdGVjdGVkIGlkOiBQaWVjZUludGVyZmFjZVtcImlkXCJdO1xyXG4gIHByb3RlY3RlZCBjb2xvcjogUGllY2VJbnRlcmZhY2VbXCJjb2xvclwiXTtcclxuICBwcm90ZWN0ZWQgb3JpZW50YXRpb246IDAgfCAxIHwgMiB8IDM7XHJcbiAgcHJvdGVjdGVkIGtpY2tEYXRhOiBbbnVtYmVyLCBudW1iZXJdW11bXTtcclxuXHJcbiAgY29uc3RydWN0b3IoeyBtYXRyaXgsIHBpdm90LCBpZCwgY29sb3IgfTogUGllY2VJbnRlcmZhY2UpIHtcclxuICAgIHRoaXMubWF0cml4ID0gbWF0cml4O1xyXG4gICAgdGhpcy5waXZvdCA9IHBpdm90O1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgdGhpcy5vcmllbnRhdGlvbiA9IDA7XHJcbiAgICB0aGlzLmtpY2tEYXRhID0gW1xyXG4gICAgICBbXHJcbiAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgIFswLCAwXSxcclxuICAgICAgICBbMCwgMF0sXHJcbiAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgIFswLCAwXSxcclxuICAgICAgXSxcclxuICAgICAgW1xyXG4gICAgICAgIFswLCAwXSxcclxuICAgICAgICBbMSwgMF0sXHJcbiAgICAgICAgWzAsIC0xXSxcclxuICAgICAgICBbMCwgMl0sXHJcbiAgICAgICAgWzEsIDJdLFxyXG4gICAgICBdLFxyXG4gICAgICBbXHJcbiAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgIFswLCAwXSxcclxuICAgICAgICBbMCwgMF0sXHJcbiAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgIFswLCAwXSxcclxuICAgICAgXSxcclxuICAgICAgW1xyXG4gICAgICAgIFswLCAwXSxcclxuICAgICAgICBbLTEsIDBdLFxyXG4gICAgICAgIFstMSwgLTFdLFxyXG4gICAgICAgIFswLCAyXSxcclxuICAgICAgICBbLTEsIDJdLFxyXG4gICAgICBdLFxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRQaXZvdCA9ICh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgdGhpcy5waXZvdCA9IFt4LCB5XTtcclxuICB9O1xyXG5cclxuICBwdWJsaWMgZ2V0UGl2b3QgPSAoKTogUGllY2VJbnRlcmZhY2VbXCJwaXZvdFwiXSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5waXZvdDtcclxuICB9O1xyXG5cclxuICBwdWJsaWMgZ2V0TWF0cml4ID0gKCk6IFBpZWNlSW50ZXJmYWNlW1wibWF0cml4XCJdID0+IHtcclxuICAgIHJldHVybiB0aGlzLm1hdHJpeDtcclxuICB9O1xyXG5cclxuICBwdWJsaWMgZ2V0Q29sb3IgPSAoKTogUGllY2VJbnRlcmZhY2VbXCJjb2xvclwiXSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5jb2xvcjtcclxuICB9O1xyXG5cclxuICBwdWJsaWMgcm90YXRlID0gKGRpcjogMCB8IDEsIGJvYXJkTWF0cml4OiBCb2FyZE1hdHJpeCk6IHZvaWQgPT4ge1xyXG4gICAgaWYgKHRoaXMuaWQgPT09IFwiT1wiKSByZXR1cm47XHJcbiAgICBsZXQgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uTWF0cml4KGRpcik7XHJcblxyXG4gICAgbGV0IHJvdGF0ZWQgPSB0aGlzLm1hdHJpeC5tYXAoKHRpbGUpID0+IHtcclxuICAgICAgcmV0dXJuIG1hdHJpeE11bHRpcGx5KHJvdGF0aW9uLCB0aWxlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY2hhbmdlT3JpZW50YXRpb24oZGlyKTtcclxuXHJcbiAgICBsZXQgcm90YXRpb25TdWNjZXNzZnVsOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBmb3IgKGNvbnN0IFt4LCB5XSBvZiB0aGlzLmtpY2tEYXRhW3RoaXMub3JpZW50YXRpb25dKSB7XHJcbiAgICAgIGxldCBraWNrOiBib29sZWFuID0gdGhpcy5jaGVja0tpY2soeCwgeSwgcm90YXRlZCwgYm9hcmRNYXRyaXgpO1xyXG4gICAgICBpZiAoIWtpY2spIHtcclxuICAgICAgICB0aGlzLmRvS2ljayh4LCB5LCByb3RhdGVkLCBkaXIpO1xyXG4gICAgICAgIHJvdGF0aW9uU3VjY2Vzc2Z1bCA9IHRydWU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXJvdGF0aW9uU3VjY2Vzc2Z1bCkge1xyXG4gICAgICB0aGlzLmNoYW5nZU9yaWVudGF0aW9uKGRpciA9PT0gMCA/IDEgOiAwKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwcml2YXRlIGdldFJvdGF0aW9uTWF0cml4KGRpcjogMCB8IDEpOiBudW1iZXJbXVtdIHtcclxuICAgIGxldCByb3RhdGlvbjtcclxuICAgIGlmIChkaXIgPT09IDApIHtcclxuICAgICAgcm90YXRpb24gPSBbXHJcbiAgICAgICAgWzAsIDFdLFxyXG4gICAgICAgIFstMSwgMF0sXHJcbiAgICAgIF07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByb3RhdGlvbiA9IFtcclxuICAgICAgICBbMCwgLTFdLFxyXG4gICAgICAgIFsxLCAwXSxcclxuICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcm90YXRpb247XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNoZWNrS2ljayhcclxuICAgIHg6IG51bWJlcixcclxuICAgIHk6IG51bWJlcixcclxuICAgIHJvdGF0ZWQ6IFBpZWNlSW50ZXJmYWNlW1wibWF0cml4XCJdLFxyXG4gICAgYm9hcmRNYXRyaXg6IEJvYXJkTWF0cml4XHJcbiAgKTogYm9vbGVhbiB7XHJcbiAgICBsZXQga2ljayA9IGZhbHNlO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3RhdGVkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICByb3RhdGVkW2ldWzBdICsgdGhpcy5waXZvdFswXSArIHggPCAwIHx8XHJcbiAgICAgICAgcm90YXRlZFtpXVswXSArIHRoaXMucGl2b3RbMF0gKyB4ID4gOSB8fFxyXG4gICAgICAgIHJvdGF0ZWRbaV1bMV0gKyB0aGlzLnBpdm90WzFdICsgeSA8IDAgfHxcclxuICAgICAgICByb3RhdGVkW2ldWzFdICsgdGhpcy5waXZvdFsxXSArIHkgPiAxOVxyXG4gICAgICApIHtcclxuICAgICAgICBraWNrID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICBib2FyZE1hdHJpeFtyb3RhdGVkW2ldWzFdICsgdGhpcy5waXZvdFsxXSArIHldPy5bXHJcbiAgICAgICAgICByb3RhdGVkW2ldWzBdICsgdGhpcy5waXZvdFswXSArIHhcclxuICAgICAgICBdPy52YWx1ZSA9PT0gMVxyXG4gICAgICApIHtcclxuICAgICAgICBraWNrID0gdHJ1ZTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGtpY2s7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGRvS2ljayhcclxuICAgIHg6IG51bWJlcixcclxuICAgIHk6IG51bWJlcixcclxuICAgIHJvdGF0ZWQ6IFBpZWNlSW50ZXJmYWNlW1wibWF0cml4XCJdLFxyXG4gICAgZGlyOiAxIHwgMFxyXG4gICkge1xyXG4gICAgdGhpcy5tYXRyaXggPSByb3RhdGVkO1xyXG4gICAgdGhpcy5waXZvdFswXSArPSB4O1xyXG4gICAgdGhpcy5waXZvdFsxXSArPSB5O1xyXG4gICAgdGhpcy5jaGFuZ2VPcmllbnRhdGlvbihkaXIpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjaGFuZ2VPcmllbnRhdGlvbihkaXI6IDEgfCAwKSB7XHJcbiAgICB0aGlzLm9yaWVudGF0aW9uID0gKFxyXG4gICAgICBkaXIgPT0gMVxyXG4gICAgICAgID8gKCgodGhpcy5vcmllbnRhdGlvbiArIDEpICUgNCkgKyA0KSAlIDRcclxuICAgICAgICA6ICgoKHRoaXMub3JpZW50YXRpb24gLSAxKSAlIDQpICsgNCkgJSA0XHJcbiAgICApIGFzIHR5cGVvZiB0aGlzLm9yaWVudGF0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gbWF0cml4TXVsdGlwbHkoYTogbnVtYmVyW11bXSwgYjogbnVtYmVyW10pIHtcclxuICBsZXQgYyA9IFthWzBdWzBdICogYlswXSArIGFbMF1bMV0gKiBiWzFdLCBhWzFdWzBdICogYlswXSArIGFbMV1bMV0gKiBiWzFdXTtcclxuICByZXR1cm4gYztcclxufVxyXG4iLCJpbXBvcnQgUGllY2UgZnJvbSBcIi4vUGllY2VcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRQaWVjZSBleHRlbmRzIFBpZWNlIHtcclxuICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgY29uc3QgaWQgPSBcIlRcIjtcclxuICAgIGNvbnN0IGNvbG9yID0gXCIjZmYwMGZmXCI7XHJcbiAgICBsZXQgbWF0cml4ID0gW1xyXG4gICAgICBbMCwgLTFdLFxyXG4gICAgICBbLTEsIDBdLFxyXG4gICAgICBbMCwgMF0sXHJcbiAgICAgIFsxLCAwXSxcclxuICAgIF07XHJcbiAgICBzdXBlcih7XHJcbiAgICAgIGlkLFxyXG4gICAgICBjb2xvcixcclxuICAgICAgcGl2b3Q6IFt4LCB5XSxcclxuICAgICAgbWF0cml4LFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQaWVjZSBmcm9tIFwiLi9QaWVjZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSVBpZWNlIGV4dGVuZHMgUGllY2Uge1xyXG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBpZCA9IFwiSVwiO1xyXG4gICAgY29uc3QgY29sb3IgPSBcIiMwMGZmZmZcIjtcclxuICAgIGxldCBtYXRyaXggPSBbXHJcbiAgICAgIFstMS41LCAwLjVdLFxyXG4gICAgICBbLTAuNSwgMC41XSxcclxuICAgICAgWzAuNSwgMC41XSxcclxuICAgICAgWzEuNSwgMC41XSxcclxuICAgIF07XHJcbiAgICBzdXBlcih7XHJcbiAgICAgIGlkLFxyXG4gICAgICBjb2xvcixcclxuICAgICAgcGl2b3Q6IFt4LCB5XSxcclxuICAgICAgbWF0cml4LFxyXG4gICAgfSk7XHJcbiAgICB0aGlzLmtpY2tEYXRhID0gW1xyXG4gICAgICBbXHJcbiAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgIFstMSwgMF0sXHJcbiAgICAgICAgWzIsIDBdLFxyXG4gICAgICAgIFstMSwgMF0sXHJcbiAgICAgICAgWzIsIDBdLFxyXG4gICAgICBdLFxyXG4gICAgICBbXHJcbiAgICAgICAgWy0xLCAwXSxcclxuICAgICAgICBbMCwgMF0sXHJcbiAgICAgICAgWzAsIDBdLFxyXG4gICAgICAgIFswLCAxXSxcclxuICAgICAgICBbMCwgLTJdLFxyXG4gICAgICBdLFxyXG4gICAgICBbXHJcbiAgICAgICAgWy0xLCAxXSxcclxuICAgICAgICBbMSwgMV0sXHJcbiAgICAgICAgWy0yLCAxXSxcclxuICAgICAgICBbMSwgMF0sXHJcbiAgICAgICAgWy0yLCAwXSxcclxuICAgICAgXSxcclxuICAgICAgW1xyXG4gICAgICAgIFswLCAxXSxcclxuICAgICAgICBbMCwgMV0sXHJcbiAgICAgICAgWzAsIDFdLFxyXG4gICAgICAgIFswLCAtMV0sXHJcbiAgICAgICAgWzAsIDJdLFxyXG4gICAgICBdLFxyXG4gICAgXTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBpZWNlIGZyb20gXCIuL1BpZWNlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPUGllY2UgZXh0ZW5kcyBQaWVjZSB7XHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGlkID0gXCJPXCI7XHJcbiAgICBjb25zdCBjb2xvciA9IFwiI2ZmZmYwMFwiO1xyXG4gICAgbGV0IG1hdHJpeCA9IFtcclxuICAgICAgWy0xLCAwXSxcclxuICAgICAgWzAsIDBdLFxyXG4gICAgICBbLTEsIC0xXSxcclxuICAgICAgWzAsIC0xXSxcclxuICAgIF07XHJcbiAgICBzdXBlcih7XHJcbiAgICAgIGlkLFxyXG4gICAgICBjb2xvcixcclxuICAgICAgcGl2b3Q6IFt4LCB5XSxcclxuICAgICAgbWF0cml4LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcm90YXRlID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgcmV0dXJuO1xyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IFBpZWNlIGZyb20gXCIuL1BpZWNlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUUGllY2UgZXh0ZW5kcyBQaWVjZSB7XHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGlkID0gXCJTXCI7XHJcbiAgICBjb25zdCBjb2xvciA9IFwiIzAwZmYwMFwiO1xyXG4gICAgbGV0IG1hdHJpeCA9IFtcclxuICAgICAgWy0xLCAwXSxcclxuICAgICAgWzAsIDBdLFxyXG4gICAgICBbMCwgLTFdLFxyXG4gICAgICBbMSwgLTFdLFxyXG4gICAgXTtcclxuICAgIHN1cGVyKHtcclxuICAgICAgaWQsXHJcbiAgICAgIGNvbG9yLFxyXG4gICAgICBwaXZvdDogW3gsIHldLFxyXG4gICAgICBtYXRyaXgsXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBpZWNlIGZyb20gXCIuL1BpZWNlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUUGllY2UgZXh0ZW5kcyBQaWVjZSB7XHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGlkID0gXCJKXCI7XHJcbiAgICBjb25zdCBjb2xvciA9IFwiIzAwMDBmZlwiO1xyXG4gICAgbGV0IG1hdHJpeCA9IFtcclxuICAgICAgWy0xLCAwXSxcclxuICAgICAgWzAsIDBdLFxyXG4gICAgICBbMSwgMF0sXHJcbiAgICAgIFstMSwgLTFdLFxyXG4gICAgXTtcclxuICAgIHN1cGVyKHtcclxuICAgICAgaWQsXHJcbiAgICAgIGNvbG9yLFxyXG4gICAgICBwaXZvdDogW3gsIHldLFxyXG4gICAgICBtYXRyaXgsXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBpZWNlIGZyb20gXCIuL1BpZWNlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUUGllY2UgZXh0ZW5kcyBQaWVjZSB7XHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGlkID0gXCJaXCI7XHJcbiAgICBjb25zdCBjb2xvciA9IFwiI2ZmMDAwMFwiO1xyXG4gICAgbGV0IG1hdHJpeCA9IFtcclxuICAgICAgWy0xLCAtMV0sXHJcbiAgICAgIFswLCAwXSxcclxuICAgICAgWzAsIC0xXSxcclxuICAgICAgWzEsIDBdLFxyXG4gICAgXTtcclxuICAgIHN1cGVyKHtcclxuICAgICAgaWQsXHJcbiAgICAgIGNvbG9yLFxyXG4gICAgICBwaXZvdDogW3gsIHldLFxyXG4gICAgICBtYXRyaXgsXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBpZWNlIGZyb20gXCIuL1BpZWNlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUUGllY2UgZXh0ZW5kcyBQaWVjZSB7XHJcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGlkID0gXCJMXCI7XHJcbiAgICBjb25zdCBjb2xvciA9IFwiI2ZmN2YwMFwiO1xyXG4gICAgbGV0IG1hdHJpeCA9IFtcclxuICAgICAgWy0xLCAwXSxcclxuICAgICAgWzAsIDBdLFxyXG4gICAgICBbMSwgMF0sXHJcbiAgICAgIFsxLCAtMV0sXHJcbiAgICBdO1xyXG4gICAgc3VwZXIoe1xyXG4gICAgICBpZCxcclxuICAgICAgY29sb3IsXHJcbiAgICAgIHBpdm90OiBbeCwgeV0sXHJcbiAgICAgIG1hdHJpeCxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgR2FtZSBmcm9tIFwiLi9HYW1lXCI7XHJcblxyXG5jb25zdCBnYW1lID0gbmV3IEdhbWUoKTtcclxuZ2FtZS5zdGFydEdhbWUoKTtcclxuIiwiaW1wb3J0IEJvYXJkIGZyb20gXCIuL0JvYXJkL0JvYXJkXCI7XHJcbmltcG9ydCBQaWVjZSBmcm9tIFwiLi9QaWVjZS9QaWVjZVwiO1xyXG5pbXBvcnQgVFBpZWNlIGZyb20gXCIuL1BpZWNlL1RQaWVjZVwiO1xyXG5pbXBvcnQgSVBpZWNlIGZyb20gXCIuL1BpZWNlL0lQaWVjZVwiO1xyXG5pbXBvcnQgT1BpZWNlIGZyb20gXCIuL1BpZWNlL09QaWVjZVwiO1xyXG5pbXBvcnQgU1BpZWNlIGZyb20gXCIuL1BpZWNlL1NQaWVjZVwiO1xyXG5pbXBvcnQgSlBpZWNlIGZyb20gXCIuL1BpZWNlL0pQaWVjZVwiO1xyXG5pbXBvcnQgWlBpZWNlIGZyb20gXCIuL1BpZWNlL1pQaWVjZVwiO1xyXG5pbXBvcnQgTFBpZWNlIGZyb20gXCIuL1BpZWNlL0xQaWVjZVwiO1xyXG5cclxuY2xhc3MgR2FtZSB7XHJcbiAgcHJpdmF0ZSBib2FyZDogQm9hcmQ7XHJcbiAgcHJpdmF0ZSBoaXN0b3J5OiBudW1iZXIgPSA5OTtcclxuICBwcml2YXRlIGN1cnJlbnRQaWVjZTogUGllY2U7XHJcbiAgcHJpdmF0ZSBuZXh0UGllY2U6IFBpZWNlO1xyXG4gIHByaXZhdGUgdGltZW91dDogTm9kZUpTLlRpbWVvdXQgfCB1bmRlZmluZWQ7XHJcbiAgcHJpdmF0ZSBub3JtYWxEcm9wOiBudW1iZXIgPSAxMDA7XHJcbiAgcHJpdmF0ZSBzb2Z0RHJvcDogbnVtYmVyID0gNTA7XHJcbiAgcHJpdmF0ZSBzdG9wcGVkOiBib29sZWFuO1xyXG4gIHByaXZhdGUgY3VycmVudFNwZWVkOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBpc1NvZnREcm9wcGluZzogYm9vbGVhbjtcclxuICBwcml2YXRlIGxhc3RVcGRhdGVUaW1lOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBhY2N1bXVsYXRlZFRpbWU6IG51bWJlcjtcclxuICBwcml2YXRlIGZyYW1lUmVxdWVzdEhhbmRsZTogbnVtYmVyIHwgbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmxhc3RVcGRhdGVUaW1lID0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgdGhpcy5ib2FyZCA9IG5ldyBCb2FyZChcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudFxyXG4gICAgKTtcclxuICAgIHRoaXMubmV4dFBpZWNlID0gdGhpcy5nZW5lcmF0ZVJhbmRvbVBpZWNlKCk7XHJcbiAgICB0aGlzLmN1cnJlbnRQaWVjZSA9IHRoaXMuZ2VuZXJhdGVSYW5kb21QaWVjZSgpO1xyXG4gICAgdGhpcy5jdXJyZW50U3BlZWQgPSB0aGlzLm5vcm1hbERyb3A7XHJcbiAgICB0aGlzLmlzU29mdERyb3BwaW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLmFjY3VtdWxhdGVkVGltZSA9IDA7XHJcbiAgICB0aGlzLmZyYW1lUmVxdWVzdEhhbmRsZSA9IG51bGw7XHJcbiAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlS2V5RG93bik7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuaGFuZGxlS2V5VXApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgIGNvbnN0IGJvYXJkTWF0cml4ID0gdGhpcy5ib2FyZC5nZXRNYXRyaXgoKTtcclxuXHJcbiAgICBzd2l0Y2ggKGUua2V5KSB7XHJcbiAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjpcclxuICAgICAgICB0aGlzLnRyeU1vdmUoLTEsIDApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOlxyXG4gICAgICAgIHRoaXMudHJ5TW92ZSgxLCAwKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBcIkFycm93RG93blwiOlxyXG4gICAgICAgIHRoaXMuc3RhcnRTb2Z0RHJvcCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIFwiQXJyb3dVcFwiOlxyXG4gICAgICBjYXNlIFwiY1wiOlxyXG4gICAgICAgIHRoaXMuY3VycmVudFBpZWNlLnJvdGF0ZSgxLCBib2FyZE1hdHJpeCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCIgXCI6XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UGllY2Uucm90YXRlKDAsIGJvYXJkTWF0cml4KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZWRyYXdHYW1lQm9hcmQoKTtcclxuICB9O1xyXG5cclxuICBwcml2YXRlIGhhbmRsZUtleVVwID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJBcnJvd0Rvd25cIikge1xyXG4gICAgICB0aGlzLnN0b3BTb2Z0RHJvcCgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgdHJ5TW92ZSA9ICh4T2Zmc2V0OiBudW1iZXIsIHlPZmZzZXQ6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgbWF0cml4ID0gdGhpcy5jdXJyZW50UGllY2UuZ2V0TWF0cml4KCk7XHJcbiAgICBjb25zdCBwaXZvdCA9IHRoaXMuY3VycmVudFBpZWNlLmdldFBpdm90KCk7XHJcbiAgICBsZXQgZmxhZyA9IG1hdHJpeC5ldmVyeSgodGlsZSkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdYID0gdGlsZVswXSArIHBpdm90WzBdICsgeE9mZnNldDtcclxuICAgICAgY29uc3QgbmV3WSA9IHRpbGVbMV0gKyBwaXZvdFsxXSArIHlPZmZzZXQ7XHJcbiAgICAgIHJldHVybiB0aGlzLmlzUG9zaXRpb25WYWxpZChuZXdYLCBuZXdZKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChmbGFnKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudFBpZWNlLnNldFBpdm90KHBpdm90WzBdICsgeE9mZnNldCwgcGl2b3RbMV0gKyB5T2Zmc2V0KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwcml2YXRlIGlzUG9zaXRpb25WYWxpZCA9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgYm9hcmRNYXRyaXggPSB0aGlzLmJvYXJkLmdldE1hdHJpeCgpO1xyXG4gICAgcmV0dXJuIHggPj0gMCAmJiB4IDw9IDkgJiYgeSA8PSAxOSAmJiBib2FyZE1hdHJpeFt5XT8uW3hdPy52YWx1ZSAhPT0gMTtcclxuICB9O1xyXG5cclxuICBwcml2YXRlIHN0YXJ0U29mdERyb3AoKSB7XHJcbiAgICBpZiAoIXRoaXMuaXNTb2Z0RHJvcHBpbmcpIHtcclxuICAgICAgdGhpcy5jdXJyZW50U3BlZWQgPSB0aGlzLnNvZnREcm9wO1xyXG4gICAgICB0aGlzLmlzU29mdERyb3BwaW5nID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3RvcFNvZnREcm9wKCkge1xyXG4gICAgdGhpcy5jdXJyZW50U3BlZWQgPSB0aGlzLm5vcm1hbERyb3A7XHJcbiAgICB0aGlzLmlzU29mdERyb3BwaW5nID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNhbkRyb3AgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBib2FyZE1hdHJpeCA9IHRoaXMuYm9hcmQuZ2V0TWF0cml4KCk7XHJcbiAgICBjb25zdCBtYXRyaXggPSB0aGlzLmN1cnJlbnRQaWVjZS5nZXRNYXRyaXgoKTtcclxuICAgIGNvbnN0IHBpdm90ID0gdGhpcy5jdXJyZW50UGllY2UuZ2V0UGl2b3QoKTtcclxuICAgIHJldHVybiBtYXRyaXguZXZlcnkoKHRpbGUpID0+IHtcclxuICAgICAgY29uc3QgbmV3WSA9IHRpbGVbMV0gKyBwaXZvdFsxXSArIDE7XHJcbiAgICAgIHJldHVybiBuZXdZIDw9IDE5ICYmIGJvYXJkTWF0cml4W25ld1ldPy5bdGlsZVswXSArIHBpdm90WzBdXT8udmFsdWUgIT09IDE7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBwcml2YXRlIHJlZHJhd0dhbWVCb2FyZCA9ICgpID0+IHtcclxuICAgIHRoaXMuYm9hcmQuZHJhdygpO1xyXG4gICAgdGhpcy5ib2FyZC5kcmF3UGllY2UodGhpcy5jdXJyZW50UGllY2UpO1xyXG4gIH07XHJcblxyXG4gIHB1YmxpYyBzdGFydEdhbWUgPSAoKSA9PiB7XHJcbiAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcclxuICAgIGNvbnNvbGUubG9nKFwiU1RBUlRFRFwiKTtcclxuICAgIHRoaXMuc3Bhd24oKTtcclxuICAgIHRoaXMuc3RhcnREcm9wTG9vcCgpO1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgc3RhcnREcm9wTG9vcCA9ICgpOiB2b2lkID0+IHtcclxuICAgIHRoaXMuZnJhbWVSZXF1ZXN0SGFuZGxlID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZHJvcExvb3ApO1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgZHJvcExvb3AgPSAodGltZXN0YW1wOiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgIGNvbnN0IGRlbHRhVGltZSA9IHRpbWVzdGFtcCAtIHRoaXMubGFzdFVwZGF0ZVRpbWU7XHJcbiAgICB0aGlzLmxhc3RVcGRhdGVUaW1lID0gdGltZXN0YW1wO1xyXG4gICAgdGhpcy5hY2N1bXVsYXRlZFRpbWUgKz0gZGVsdGFUaW1lO1xyXG5cclxuICAgIC8vIFVzZSBjdXJyZW50U3BlZWQgdG8gZGV0ZXJtaW5lIGxvZ2ljIHVwZGF0ZSBmcmVxdWVuY3lcclxuICAgIHdoaWxlICh0aGlzLmFjY3VtdWxhdGVkVGltZSA+IHRoaXMuY3VycmVudFNwZWVkKSB7XHJcbiAgICAgIGlmICh0aGlzLmNhbkRyb3AoKSkge1xyXG4gICAgICAgIHRoaXMuZHJvcCgpO1xyXG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLnRpbWVvdXQpIHtcclxuICAgICAgICB0aGlzLnF1ZXVlU3RvcCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuYWNjdW11bGF0ZWRUaW1lIC09IHRoaXMuY3VycmVudFNwZWVkO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVkcmF3R2FtZUJvYXJkKCk7XHJcbiAgICBpZiAoIXRoaXMuc3RvcHBlZCkge1xyXG4gICAgICB0aGlzLnN0YXJ0RHJvcExvb3AoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBwcml2YXRlIHNwYXduID0gKCkgPT4ge1xyXG4gICAgdGhpcy5jdXJyZW50UGllY2UgPSB0aGlzLm5leHRQaWVjZTtcclxuICAgIHRoaXMubmV4dFBpZWNlID0gdGhpcy5nZW5lcmF0ZVJhbmRvbVBpZWNlKCk7XHJcbiAgICB0aGlzLmJvYXJkLmRyYXdQaWVjZSh0aGlzLmN1cnJlbnRQaWVjZSk7XHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSBkcm9wID0gKCkgPT4ge1xyXG4gICAgY29uc3QgcGl2b3QgPSB0aGlzLmN1cnJlbnRQaWVjZS5nZXRQaXZvdCgpO1xyXG4gICAgdGhpcy5jdXJyZW50UGllY2Uuc2V0UGl2b3QocGl2b3RbMF0sIHBpdm90WzFdICsgMSk7XHJcbiAgICB0aGlzLnJlZHJhd0dhbWVCb2FyZCgpO1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgcXVldWVTdG9wID0gKCkgPT4ge1xyXG4gICAgaWYgKHRoaXMudGltZW91dCkgcmV0dXJuO1xyXG4gICAgY29uc29sZS5sb2coXCJTVE9QUElOR1wiKTtcclxuICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5zdG9wLCAxMDAwKTtcclxuICB9O1xyXG5cclxuICBwcml2YXRlIHN0b3AgPSAoKTogdm9pZCA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIlNUT1BQRURcIik7XHJcbiAgICB0aGlzLmNsZWFyU3RvcFRpbWVvdXQoKTtcclxuICAgIGlmICh0aGlzLmNhbkRyb3AoKSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlNUT1AgQ0FOQ0VMTEVEXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLmNsZWFyRHJvcEludGVydmFsKCk7XHJcbiAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xyXG4gICAgY29uc29sZS5sb2coXCJBRERJTkcgVE8gQk9BUkRcIik7XHJcbiAgICB0aGlzLmJvYXJkLmFkZFRvU3RhY2sodGhpcy5jdXJyZW50UGllY2UpO1xyXG4gICAgY29uc29sZS5sb2coXCJDTEVBUklORyBMSU5FU1wiKTtcclxuICAgIHRoaXMuYm9hcmQuY2xlYXJMaW5lKCk7XHJcbiAgICBpZiAodGhpcy5ib2FyZC5tYXhIZWlnaHRSZWFjaGVkKCkpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJHQU1FIE9WRVJcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnN0YXJ0R2FtZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgY2xlYXJEcm9wSW50ZXJ2YWwgPSAoKTogdm9pZCA9PiB7XHJcbiAgICBpZiAodGhpcy5mcmFtZVJlcXVlc3RIYW5kbGUpIHtcclxuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5mcmFtZVJlcXVlc3RIYW5kbGUpO1xyXG4gICAgICB0aGlzLmZyYW1lUmVxdWVzdEhhbmRsZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSBjbGVhclN0b3BUaW1lb3V0ID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgaWYgKHRoaXMudGltZW91dCkgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XHJcbiAgICB0aGlzLnRpbWVvdXQgPSB1bmRlZmluZWQ7XHJcbiAgfTtcclxuXHJcbiAgcHJpdmF0ZSByYW5kb21pemVyID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICBsZXQgcmFuZG9tID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgICB3aGlsZSAocmFuZG9tID09PSB0aGlzLmhpc3RvcnkpIHtcclxuICAgICAgcmFuZG9tID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmhpc3RvcnkgPSByYW5kb207XHJcbiAgICByZXR1cm4gcmFuZG9tO1xyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgZ2VuZXJhdGVSYW5kb21QaWVjZSA9ICgpOiBQaWVjZSA9PiB7XHJcbiAgICBjb25zdCByYW5kb20gPSB0aGlzLnJhbmRvbWl6ZXIoKTtcclxuICAgIGxldCBwaWVjZTogUGllY2U7XHJcbiAgICBzd2l0Y2ggKHJhbmRvbSkge1xyXG4gICAgICBjYXNlIDA6XHJcbiAgICAgICAgcGllY2UgPSBuZXcgVFBpZWNlKDUsIDApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDE6XHJcbiAgICAgICAgcGllY2UgPSBuZXcgSVBpZWNlKDQuNSwgLTAuNSk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMjpcclxuICAgICAgICBwaWVjZSA9IG5ldyBKUGllY2UoNSwgMCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMzpcclxuICAgICAgICBwaWVjZSA9IG5ldyBMUGllY2UoNSwgMCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNDpcclxuICAgICAgICBwaWVjZSA9IG5ldyBTUGllY2UoNSwgMCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNTpcclxuICAgICAgICBwaWVjZSA9IG5ldyBPUGllY2UoNSwgMCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcGllY2UgPSBuZXcgWlBpZWNlKDUsIDApO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBpZWNlO1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdhbWU7XHJcbiJdLCJuYW1lcyI6WyJjYW52YXMiLCJzY2FsZSIsImRyYXdUaWxlIiwieCIsInkiLCJjb2xvciIsImN0eCIsImZpbGxTdHlsZSIsInN0cm9rZVN0eWxlIiwiZ2xvYmFsQWxwaGEiLCJmaWxsUmVjdCIsInN0cm9rZVJlY3QiLCJkcmF3UGllY2UiLCJwaWVjZSIsImdldFBpdm90IiwiZ2V0Q29sb3IiLCJnZXRNYXRyaXgiLCJwaXZvdCIsImZvckVhY2giLCJ0aWxlIiwiZHJhdyIsImNsZWFyIiwiY2VsbCIsIm1hdHJpeCIsInZhbHVlIiwiZ2V0Q3R4IiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJjbGVhckxpbmUiLCJsaW5lc1RvQ2xlYXIiLCJldmVyeSIsInB1c2giLCJpIiwibGVuZ3RoIiwiQXJyYXkiLCJmcm9tIiwibWF4SGVpZ2h0UmVhY2hlZCIsInNvbWUiLCJhZGRUb1N0YWNrIiwidGhpcyIsImdldENvbnRleHQiLCJpZCIsInNldFBpdm90Iiwicm90YXRlIiwiZGlyIiwiYm9hcmRNYXRyaXgiLCJyb3RhdGlvbiIsImdldFJvdGF0aW9uTWF0cml4Iiwicm90YXRlZCIsIm1hcCIsImIiLCJhIiwiY2hhbmdlT3JpZW50YXRpb24iLCJyb3RhdGlvblN1Y2Nlc3NmdWwiLCJraWNrRGF0YSIsIm9yaWVudGF0aW9uIiwiY2hlY2tLaWNrIiwiZG9LaWNrIiwia2ljayIsImhpc3RvcnkiLCJub3JtYWxEcm9wIiwic29mdERyb3AiLCJoYW5kbGVLZXlEb3duIiwiZSIsImJvYXJkIiwia2V5IiwidHJ5TW92ZSIsInN0YXJ0U29mdERyb3AiLCJjdXJyZW50UGllY2UiLCJyZWRyYXdHYW1lQm9hcmQiLCJoYW5kbGVLZXlVcCIsInN0b3BTb2Z0RHJvcCIsInhPZmZzZXQiLCJ5T2Zmc2V0IiwibmV3WCIsIm5ld1kiLCJpc1Bvc2l0aW9uVmFsaWQiLCJjYW5Ecm9wIiwic3RhcnRHYW1lIiwic3RvcHBlZCIsImNvbnNvbGUiLCJsb2ciLCJzcGF3biIsInN0YXJ0RHJvcExvb3AiLCJmcmFtZVJlcXVlc3RIYW5kbGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJkcm9wTG9vcCIsInRpbWVzdGFtcCIsImRlbHRhVGltZSIsImxhc3RVcGRhdGVUaW1lIiwiYWNjdW11bGF0ZWRUaW1lIiwiY3VycmVudFNwZWVkIiwiZHJvcCIsInRpbWVvdXQiLCJxdWV1ZVN0b3AiLCJuZXh0UGllY2UiLCJnZW5lcmF0ZVJhbmRvbVBpZWNlIiwic2V0VGltZW91dCIsInN0b3AiLCJjbGVhclN0b3BUaW1lb3V0IiwiY2xlYXJEcm9wSW50ZXJ2YWwiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsImNsZWFyVGltZW91dCIsInVuZGVmaW5lZCIsInJhbmRvbWl6ZXIiLCJyYW5kb20iLCJNYXRoIiwiZmxvb3IiLCJKUGllY2UiLCJMUGllY2UiLCJTUGllY2UiLCJaUGllY2UiLCJ3aW5kb3ciLCJwZXJmb3JtYW5jZSIsIm5vdyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlzU29mdERyb3BwaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciJdLCJzb3VyY2VSb290IjoiIn0=