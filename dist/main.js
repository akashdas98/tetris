(()=>{"use strict";const t=function(t,e){void 0===e&&(e=30);var r=this;this.drawTile=function(t,e,o){r.ctx.fillStyle=o,r.ctx.strokeStyle="#000000",r.ctx.globalAlpha=1,r.ctx.fillRect(t*r.scale,e*r.scale,r.scale,r.scale),r.ctx.globalAlpha=.5,r.ctx.strokeRect(t*r.scale,e*r.scale,r.scale,r.scale)},this.drawPiece=function(t){var e=t.getPivot,o=t.getColor,n=t.getMatrix,i=e(),a=o();n().forEach((function(t){r.drawTile(t[0]+i[0],t[1]+i[1],a)}))},this.draw=function(){r.clear();for(var t=0;t<20;t++)for(var e=0;e<10;e++){var o=r.matrix[t][e];1===o.value&&r.drawTile(e,t,o.color)}},this.getMatrix=function(){return r.matrix},this.getCtx=function(){return r.ctx},this.clear=function(){return r.ctx.clearRect(0,0,r.canvas.width,r.canvas.height)},this.clearLine=function(){for(var t=[],e=19;e>=0;e--)r.matrix[e].every((function(t){return 1===t.value}))&&t.push(e);for(var o=t.length-1;o>=0;o--){for(e=t[o];e>0;e--)r.matrix[e]=r.matrix[e-1];r.matrix[0]=Array.from({length:10},(function(){return{value:0,color:null}}))}return t.length>0&&(r.draw(),r.totalLinesCleared+=t.length),t.length},this.maxHeightReached=function(){return r.matrix[0].some((function(t){return 1===t.value}))},this.addToStack=function(t){t.getMatrix().forEach((function(e){var o,n=t.getPivot(),i=null===(o=r.matrix[e[1]+n[1]])||void 0===o?void 0:o[e[0]+n[0]];i&&(i.value=1,i.color=t.getColor())}))},this.getTotalLinesCleared=function(){return r.totalLinesCleared},this.canvas=t,this.ctx=t.getContext("2d"),this.scale=e,this.canvas.height=20*this.scale,this.canvas.width=10*this.scale,this.totalLinesCleared=0,this.matrix=Array.from({length:20},(function(){return Array.from({length:10},(function(){return{value:0,color:null}}))}))},e=function(){function t(t){var e=t.matrix,r=t.pivot,o=t.id,n=t.color,i=this;this.setPivot=function(t,e){i.pivot=[t,e]},this.getPivot=function(){return i.pivot},this.getMatrix=function(){return i.matrix},this.getColor=function(){return i.color},this.rotate=function(t,e){if("O"!==i.id){var r=i.getRotationMatrix(t),o=i.matrix.map((function(t){return o=t,[(e=r)[0][0]*o[0]+e[0][1]*o[1],e[1][0]*o[0]+e[1][1]*o[1]];var e,o}));i.changeOrientation(t);for(var n=!1,a=0,c=i.kickData[i.orientation];a<c.length;a++){var u=c[a],s=u[0],l=u[1];if(!i.checkKick(s,l,o,e)){i.doKick(s,l,o,t),n=!0;break}}n||i.changeOrientation(0===t?1:0)}},this.matrix=e,this.pivot=r,this.id=o,this.color=n,this.orientation=0,this.kickData=[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[1,0],[0,-1],[0,2],[1,2]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]]]}return t.prototype.getRotationMatrix=function(t){return 0===t?[[0,1],[-1,0]]:[[0,-1],[1,0]]},t.prototype.checkKick=function(t,e,r,o){for(var n,i,a=!1,c=0;c<r.length;c++){if(r[c][0]+this.pivot[0]+t<0||r[c][0]+this.pivot[0]+t>9||r[c][1]+this.pivot[1]+e<0||r[c][1]+this.pivot[1]+e>19){a=!0;break}if(1===(null===(i=null===(n=o[r[c][1]+this.pivot[1]+e])||void 0===n?void 0:n[r[c][0]+this.pivot[0]+t])||void 0===i?void 0:i.value)){a=!0;break}}return a},t.prototype.doKick=function(t,e,r,o){this.matrix=r,this.pivot[0]+=t,this.pivot[1]+=e,this.changeOrientation(o)},t.prototype.changeOrientation=function(t){this.orientation=1==t?((this.orientation+1)%4+4)%4:((this.orientation-1)%4+4)%4},t}();var r,o=(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});const n=function(t){function e(e,r){return t.call(this,{id:"T",color:"#ff00ff",pivot:[e,r],matrix:[[0,-1],[-1,0],[0,0],[1,0]]})||this}return o(e,t),e}(e);var i=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();const a=function(t){function e(e,r){var o=this;return(o=t.call(this,{id:"I",color:"#00ffff",pivot:[e,r],matrix:[[-1.5,.5],[-.5,.5],[.5,.5],[1.5,.5]]})||this).kickData=[[[0,0],[-1,0],[2,0],[-1,0],[2,0]],[[-1,0],[0,0],[0,0],[0,1],[0,-2]],[[-1,1],[1,1],[-2,1],[1,0],[-2,0]],[[0,1],[0,1],[0,1],[0,-1],[0,2]]],o}return i(e,t),e}(e);var c=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();const u=function(t){function e(e,r){var o=this;return(o=t.call(this,{id:"O",color:"#ffff00",pivot:[e,r],matrix:[[-1,0],[0,0],[-1,-1],[0,-1]]})||this).rotate=function(){},o}return c(e,t),e}(e);var s=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();const l=function(t){function e(e,r){return t.call(this,{id:"S",color:"#00ff00",pivot:[e,r],matrix:[[-1,0],[0,0],[0,-1],[1,-1]]})||this}return s(e,t),e}(e);var p=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();const f=function(t){function e(e,r){return t.call(this,{id:"J",color:"#0000ff",pivot:[e,r],matrix:[[-1,0],[0,0],[1,0],[-1,-1]]})||this}return p(e,t),e}(e);var h=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();const d=function(t){function e(e,r){return t.call(this,{id:"Z",color:"#ff0000",pivot:[e,r],matrix:[[-1,-1],[0,0],[0,-1],[1,0]]})||this}return h(e,t),e}(e);var v=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();const y=function(t){function e(e,r){return t.call(this,{id:"L",color:"#ff7f00",pivot:[e,r],matrix:[[-1,0],[0,0],[1,0],[1,-1]]})||this}return v(e,t),e}(e),g=function(t){var e=this;this.updateDisplay=function(){e.display.innerText=e.score.toString()},this.getScore=function(){return e.score},this.addScore=function(t,r){e.score+=e.baseScoreMap[t]*(r+1),e.updateDisplay()},this.display=t,this.score=0,this.updateDisplay(),this.baseScoreMap={0:0,1:40,2:100,3:200,4:1200}},m=function(t,e){var r=this;this.updateDisplay=function(){r.display.innerText=r.currentLevel.toString()},this.getCurrentLevel=function(){return r.currentLevel},this.updateLevel=function(t){t>=r.linesForNextLevelUp&&(r.currentLevel++,r.linesForNextLevelUp+=10,r.updateDisplay())},this.getCurrentSpeed=function(){return r.currentLevel>=29?r.levelSpeedList[29]:r.levelSpeedList[r.currentLevel]},this.display=e,this.startingLevel=t,this.currentLevel=t,this.updateDisplay(),this.linesForNextLevelUp=Math.min(10*this.startingLevel+10,Math.max(100,10*this.startingLevel-50)),this.levelSpeedList=[800,717,633,550,467,383,300,217,133,100,83,83,83,67,67,67,50,50,50,33,33,33,33,33,33,33,33,33,33,17]};new function(e){void 0===e&&(e=0);var r=this;this.history=99,this.handleKeyDown=function(t){var e=r.board.getMatrix();switch(t.key){case"ArrowLeft":r.tryMove(-1,0);break;case"ArrowRight":r.tryMove(1,0);break;case"ArrowDown":r.startSoftDrop();break;case"ArrowUp":case"c":r.currentPiece.rotate(1,e);break;case" ":r.currentPiece.rotate(0,e);break;default:return}r.redrawGameBoard()},this.handleKeyUp=function(t){"ArrowDown"===t.key&&r.stopSoftDrop()},this.tryMove=function(t,e){var o=r.currentPiece.getMatrix(),n=r.currentPiece.getPivot();o.every((function(o){var i=o[0]+n[0]+t,a=o[1]+n[1]+e;return r.isPositionValid(i,a)}))&&r.currentPiece.setPivot(n[0]+t,n[1]+e)},this.isPositionValid=function(t,e){var o,n,i=r.board.getMatrix();return t>=0&&t<=9&&e<=19&&1!==(null===(n=null===(o=i[e])||void 0===o?void 0:o[t])||void 0===n?void 0:n.value)},this.startSoftDrop=function(){r.isSoftDropping||(r.updateCurrentSpeed(Math.min(100,r.level.getCurrentSpeed()/2)),r.isSoftDropping=!0)},this.stopSoftDrop=function(){r.updateCurrentSpeed(r.level.getCurrentSpeed()),r.isSoftDropping=!1},this.canDrop=function(){var t=r.board.getMatrix(),e=r.currentPiece.getMatrix(),o=r.currentPiece.getPivot();return e.every((function(e){var r,n,i=e[1]+o[1]+1;return i<=19&&1!==(null===(n=null===(r=t[i])||void 0===r?void 0:r[e[0]+o[0]])||void 0===n?void 0:n.value)}))},this.redrawGameBoard=function(){r.board.draw(),r.board.drawPiece(r.currentPiece)},this.updateCurrentSpeed=function(t){r.currentSpeed=t},this.startGame=function(){r.stopped=!1,console.log("STARTED"),r.spawn(),r.startDropLoop()},this.startDropLoop=function(){r.frameRequestHandle=requestAnimationFrame(r.dropLoop)},this.dropLoop=function(t){var e=t-r.lastUpdateTime;for(r.lastUpdateTime=t,r.accumulatedTime+=e;r.accumulatedTime>r.currentSpeed;)r.canDrop()?r.drop():r.timeout||r.queueStop(),r.accumulatedTime-=r.currentSpeed;r.redrawGameBoard(),r.stopped||r.startDropLoop()},this.spawn=function(){r.currentPiece=r.nextPiece,r.nextPiece=r.generateRandomPiece(),r.board.drawPiece(r.currentPiece)},this.drop=function(){var t=r.currentPiece.getPivot();r.currentPiece.setPivot(t[0],t[1]+1),r.redrawGameBoard()},this.queueStop=function(){r.timeout||(console.log("STOPPING"),r.timeout=setTimeout(r.stop,1e3))},this.stop=function(){console.log("STOPPED"),r.clearStopTimeout(),r.canDrop()?console.log("STOP CANCELLED"):(r.clearDropInterval(),r.stopped=!0,r.handlePostOps(),r.board.maxHeightReached()?console.log("GAME OVER"):r.startGame())},this.handlePostOps=function(){console.log("ADDING TO BOARD"),r.board.addToStack(r.currentPiece),console.log("CLEARING LINES");var t=r.board.clearLine();r.scoring.addScore(t,r.level.getCurrentLevel()),r.level.updateLevel(r.board.getTotalLinesCleared()),r.updateCurrentSpeed(r.level.getCurrentSpeed())},this.clearDropInterval=function(){r.frameRequestHandle&&(cancelAnimationFrame(r.frameRequestHandle),r.frameRequestHandle=null)},this.clearStopTimeout=function(){r.timeout&&clearTimeout(r.timeout),r.timeout=void 0},this.randomizer=function(){for(var t=Math.floor(7*Math.random());t===r.history;)t=Math.floor(7*Math.random());return r.history=t,t},this.generateRandomPiece=function(){var t;switch(r.randomizer()){case 0:t=new n(5,0);break;case 1:t=new a(4.5,-.5);break;case 2:t=new f(5,0);break;case 3:t=new y(5,0);break;case 4:t=new l(5,0);break;case 5:t=new u(5,0);break;default:t=new d(5,0)}return t},this.lastUpdateTime=window.performance.now(),this.board=new t(document.querySelector("canvas")),this.scoring=new g(document.getElementById("score")),this.level=new m(e,document.getElementById("currentLevel")),this.currentSpeed=this.level.getCurrentSpeed(),this.nextPiece=this.generateRandomPiece(),this.currentPiece=this.generateRandomPiece(),this.isSoftDropping=!1,this.accumulatedTime=0,this.frameRequestHandle=null,this.stopped=!0,window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}(6).startGame()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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M0csRUFDSixPQUZlLEVBQUtxSCxjQUdsQixLQUFLLEVBQ0hySCxFQUFRLElBQUksRUFBTyxFQUFHLEdBQ3RCLE1BQ0YsS0FBSyxFQUNIQSxFQUFRLElBQUksRUFBTyxLQUFNLElBQ3pCLE1BQ0YsS0FBSyxFQUNIQSxFQUFRLElBQUl3SCxFQUFPLEVBQUcsR0FDdEIsTUFDRixLQUFLLEVBQ0h4SCxFQUFRLElBQUl5SCxFQUFPLEVBQUcsR0FDdEIsTUFDRixLQUFLLEVBQ0h6SCxFQUFRLElBQUkwSCxFQUFPLEVBQUcsR0FDdEIsTUFDRixLQUFLLEVBQ0gxSCxFQUFRLElBQUksRUFBTyxFQUFHLEdBQ3RCLE1BQ0YsUUFDRUEsRUFBUSxJQUFJMkgsRUFBTyxFQUFHLEdBRzFCLE9BQU8zSCxDQUNULEVBcE9FNkIsS0FBS3dFLGVBQWlCdUIsT0FBT0MsWUFBWUMsTUFDekNqRyxLQUFLMkMsTUFBUSxJQUFJLEVBQ2Z1RCxTQUFTQyxjQUFjLFdBRXpCbkcsS0FBS29GLFFBQVUsSUFBSSxFQUFRYyxTQUFTRSxlQUFlLFVBQ25EcEcsS0FBSzRCLE1BQVEsSUFBSSxFQUNmRSxFQUNBb0UsU0FBU0UsZUFBZSxpQkFFMUJwRyxLQUFLNEQsYUFBZTVELEtBQUs0QixNQUFNTyxrQkFDL0JuQyxLQUFLNkUsVUFBWTdFLEtBQUs4RSxzQkFDdEI5RSxLQUFLK0MsYUFBZS9DLEtBQUs4RSxzQkFDekI5RSxLQUFLd0QsZ0JBQWlCLEVBQ3RCeEQsS0FBS3lFLGdCQUFrQixFQUN2QnpFLEtBQUttRSxtQkFBcUIsS0FDMUJuRSxLQUFLOEQsU0FBVSxFQUNmaUMsT0FBT00saUJBQWlCLFVBQVdyRyxLQUFLeUMsZUFDeENzRCxPQUFPTSxpQkFBaUIsUUFBU3JHLEtBQUtpRCxZQUN4QyxDRDVDVyxDQUFTLEdBQ2pCWSxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGV0cmlzLy4vc3JjL0JvYXJkL0JvYXJkLnRzIiwid2VicGFjazovL3RldHJpcy8uL3NyYy9QaWVjZS9QaWVjZS50cyIsIndlYnBhY2s6Ly90ZXRyaXMvLi9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vdGV0cmlzLy4vc3JjL1BpZWNlL1RQaWVjZS50cyIsIndlYnBhY2s6Ly90ZXRyaXMvLi9zcmMvUGllY2UvSVBpZWNlLnRzIiwid2VicGFjazovL3RldHJpcy8uL3NyYy9QaWVjZS9PUGllY2UudHMiLCJ3ZWJwYWNrOi8vdGV0cmlzLy4vc3JjL1BpZWNlL1NQaWVjZS50cyIsIndlYnBhY2s6Ly90ZXRyaXMvLi9zcmMvUGllY2UvSlBpZWNlLnRzIiwid2VicGFjazovL3RldHJpcy8uL3NyYy9QaWVjZS9aUGllY2UudHMiLCJ3ZWJwYWNrOi8vdGV0cmlzLy4vc3JjL1BpZWNlL0xQaWVjZS50cyIsIndlYnBhY2s6Ly90ZXRyaXMvLi9zcmMvU2NvcmluZy9TY29yaW5nLnRzIiwid2VicGFjazovL3RldHJpcy8uL3NyYy9MZXZlbC9MZXZlbC50cyIsIndlYnBhY2s6Ly90ZXRyaXMvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdGV0cmlzLy4vc3JjL0dhbWUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBpZWNlIGZyb20gXCIuLi9QaWVjZS9QaWVjZVwiO1xuXG5leHBvcnQgdHlwZSBCb2FyZE1hdHJpeCA9IHsgdmFsdWU6IG51bWJlcjsgY29sb3I6IHN0cmluZyB8IG51bGwgfVtdW107XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvYXJkIHtcbiAgcHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwcml2YXRlIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuICBwcml2YXRlIHNjYWxlOiBudW1iZXI7XG4gIHByaXZhdGUgbWF0cml4OiBCb2FyZE1hdHJpeDtcbiAgcHJpdmF0ZSB0b3RhbExpbmVzQ2xlYXJlZDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIHNjYWxlOiBudW1iZXIgPSAzMCkge1xuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgIHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSBhcyBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IDIwICogdGhpcy5zY2FsZTtcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IDEwICogdGhpcy5zY2FsZTtcbiAgICB0aGlzLnRvdGFsTGluZXNDbGVhcmVkID0gMDtcbiAgICB0aGlzLm1hdHJpeCA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDIwIH0sICgpID0+XG4gICAgICBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMCB9LCAoKSA9PiAoeyB2YWx1ZTogMCwgY29sb3I6IG51bGwgfSkpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgZHJhd1RpbGUgPSAoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNvbG9yOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IFwiIzAwMDAwMFwiO1xuICAgIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gMTtcbiAgICB0aGlzLmN0eC5maWxsUmVjdCh4ICogdGhpcy5zY2FsZSwgeSAqIHRoaXMuc2NhbGUsIHRoaXMuc2NhbGUsIHRoaXMuc2NhbGUpO1xuICAgIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gMC41O1xuICAgIHRoaXMuY3R4LnN0cm9rZVJlY3QoeCAqIHRoaXMuc2NhbGUsIHkgKiB0aGlzLnNjYWxlLCB0aGlzLnNjYWxlLCB0aGlzLnNjYWxlKTtcbiAgfTtcblxuICBwdWJsaWMgZHJhd1BpZWNlID0gKHBpZWNlOiBQaWVjZSk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHsgZ2V0UGl2b3QsIGdldENvbG9yLCBnZXRNYXRyaXggfSA9IHBpZWNlO1xuICAgIGNvbnN0IHBpdm90ID0gZ2V0UGl2b3QoKTtcbiAgICBjb25zdCBjb2xvciA9IGdldENvbG9yKCk7XG4gICAgZ2V0TWF0cml4KCkuZm9yRWFjaCgodGlsZSkgPT4ge1xuICAgICAgdGhpcy5kcmF3VGlsZSh0aWxlWzBdICsgcGl2b3RbMF0sIHRpbGVbMV0gKyBwaXZvdFsxXSwgY29sb3IpO1xuICAgIH0pO1xuICB9O1xuXG4gIHB1YmxpYyBkcmF3ID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMuY2xlYXIoKTtcbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IDIwOyB5KyspIHtcbiAgICAgIGZvciAobGV0IHggPSAwOyB4IDwgMTA7IHgrKykge1xuICAgICAgICBjb25zdCBjZWxsID0gdGhpcy5tYXRyaXhbeV1beF07XG4gICAgICAgIGlmIChjZWxsLnZhbHVlID09PSAxKSB7XG4gICAgICAgICAgdGhpcy5kcmF3VGlsZSh4LCB5LCBjZWxsLmNvbG9yIGFzIHN0cmluZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcHVibGljIGdldE1hdHJpeCA9ICgpOiBCb2FyZE1hdHJpeCA9PiB0aGlzLm1hdHJpeDtcblxuICBwdWJsaWMgZ2V0Q3R4ID0gKCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA9PiB0aGlzLmN0eDtcblxuICBwdWJsaWMgY2xlYXIgPSAoKTogdm9pZCA9PlxuICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcblxuICBwdWJsaWMgY2xlYXJMaW5lID0gKCk6IG51bWJlciA9PiB7XG4gICAgY29uc3QgaGVpZ2h0ID0gMjA7XG4gICAgY29uc3Qgd2lkdGggPSAxMDtcbiAgICBsZXQgbGluZXNUb0NsZWFyID0gW107XG5cbiAgICAvLyBGaXJzdCwgaWRlbnRpZnkgYWxsIHRoZSBmdWxsIGxpbmVzXG4gICAgZm9yIChsZXQgeSA9IGhlaWdodCAtIDE7IHkgPj0gMDsgeS0tKSB7XG4gICAgICBpZiAodGhpcy5tYXRyaXhbeV0uZXZlcnkoKGNlbGwpID0+IGNlbGwudmFsdWUgPT09IDEpKSB7XG4gICAgICAgIGxpbmVzVG9DbGVhci5wdXNoKHkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1vdmUgZWFjaCBsaW5lIGRvd24gc3RhcnRpbmcgZnJvbSB0aGUgbG93ZXN0IGZ1bGwgbGluZVxuICAgIGZvciAobGV0IGkgPSBsaW5lc1RvQ2xlYXIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGxldCBsaW5lID0gbGluZXNUb0NsZWFyW2ldO1xuICAgICAgLy8gTW92ZSBhbGwgbGluZXMgYWJvdmUgdGhpcyBvbmUgZG93blxuICAgICAgZm9yIChsZXQgeSA9IGxpbmU7IHkgPiAwOyB5LS0pIHtcbiAgICAgICAgdGhpcy5tYXRyaXhbeV0gPSB0aGlzLm1hdHJpeFt5IC0gMV07XG4gICAgICB9XG4gICAgICAvLyBDbGVhciB0aGUgdG9wIHJvd1xuICAgICAgdGhpcy5tYXRyaXhbMF0gPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiB3aWR0aCB9LCAoKSA9PiAoe1xuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgY29sb3I6IG51bGwsXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgaWYgKGxpbmVzVG9DbGVhci5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmRyYXcoKTtcbiAgICAgIHRoaXMudG90YWxMaW5lc0NsZWFyZWQgKz0gbGluZXNUb0NsZWFyLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXNUb0NsZWFyLmxlbmd0aDtcbiAgfTtcblxuICBwdWJsaWMgbWF4SGVpZ2h0UmVhY2hlZCA9ICgpOiBib29sZWFuID0+XG4gICAgdGhpcy5tYXRyaXhbMF0uc29tZSgoY2VsbCkgPT4gY2VsbC52YWx1ZSA9PT0gMSk7XG5cbiAgcHVibGljIGFkZFRvU3RhY2sgPSAocGllY2U6IFBpZWNlKSA9PiB7XG4gICAgcGllY2UuZ2V0TWF0cml4KCkuZm9yRWFjaCgodGlsZSkgPT4ge1xuICAgICAgY29uc3QgcGl2b3QgPSBwaWVjZS5nZXRQaXZvdCgpO1xuICAgICAgY29uc3QgY2VsbCA9IHRoaXMubWF0cml4W3RpbGVbMV0gKyBwaXZvdFsxXV0/Llt0aWxlWzBdICsgcGl2b3RbMF1dO1xuICAgICAgaWYgKGNlbGwpIHtcbiAgICAgICAgY2VsbC52YWx1ZSA9IDE7XG4gICAgICAgIGNlbGwuY29sb3IgPSBwaWVjZS5nZXRDb2xvcigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHB1YmxpYyBnZXRUb3RhbExpbmVzQ2xlYXJlZCA9ICgpOiBudW1iZXIgPT4gdGhpcy50b3RhbExpbmVzQ2xlYXJlZDtcbn1cbiIsImltcG9ydCB7IEJvYXJkTWF0cml4IH0gZnJvbSBcIi4uL0JvYXJkL0JvYXJkXCI7XG5pbXBvcnQgeyBtYXRyaXhNdWx0aXBseSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBpZWNlSW50ZXJmYWNlIHtcbiAgbWF0cml4OiBudW1iZXJbXVtdO1xuICBwaXZvdDogbnVtYmVyW107XG4gIGlkOiBcIk9cIiB8IFwiSVwiIHwgXCJTXCIgfCBcIlpcIiB8IFwiSlwiIHwgXCJMXCIgfCBcIlRcIjtcbiAgY29sb3I6IHN0cmluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgUGllY2Uge1xuICBwcm90ZWN0ZWQgbWF0cml4OiBQaWVjZUludGVyZmFjZVtcIm1hdHJpeFwiXTtcbiAgcHJvdGVjdGVkIHBpdm90OiBQaWVjZUludGVyZmFjZVtcInBpdm90XCJdO1xuICBwcm90ZWN0ZWQgaWQ6IFBpZWNlSW50ZXJmYWNlW1wiaWRcIl07XG4gIHByb3RlY3RlZCBjb2xvcjogUGllY2VJbnRlcmZhY2VbXCJjb2xvclwiXTtcbiAgcHJvdGVjdGVkIG9yaWVudGF0aW9uOiAwIHwgMSB8IDIgfCAzO1xuICBwcm90ZWN0ZWQga2lja0RhdGE6IFtudW1iZXIsIG51bWJlcl1bXVtdO1xuXG4gIGNvbnN0cnVjdG9yKHsgbWF0cml4LCBwaXZvdCwgaWQsIGNvbG9yIH06IFBpZWNlSW50ZXJmYWNlKSB7XG4gICAgdGhpcy5tYXRyaXggPSBtYXRyaXg7XG4gICAgdGhpcy5waXZvdCA9IHBpdm90O1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgdGhpcy5vcmllbnRhdGlvbiA9IDA7XG4gICAgdGhpcy5raWNrRGF0YSA9IFtcbiAgICAgIFtcbiAgICAgICAgWzAsIDBdLFxuICAgICAgICBbMCwgMF0sXG4gICAgICAgIFswLCAwXSxcbiAgICAgICAgWzAsIDBdLFxuICAgICAgICBbMCwgMF0sXG4gICAgICBdLFxuICAgICAgW1xuICAgICAgICBbMCwgMF0sXG4gICAgICAgIFsxLCAwXSxcbiAgICAgICAgWzAsIC0xXSxcbiAgICAgICAgWzAsIDJdLFxuICAgICAgICBbMSwgMl0sXG4gICAgICBdLFxuICAgICAgW1xuICAgICAgICBbMCwgMF0sXG4gICAgICAgIFswLCAwXSxcbiAgICAgICAgWzAsIDBdLFxuICAgICAgICBbMCwgMF0sXG4gICAgICAgIFswLCAwXSxcbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFswLCAwXSxcbiAgICAgICAgWy0xLCAwXSxcbiAgICAgICAgWy0xLCAtMV0sXG4gICAgICAgIFswLCAyXSxcbiAgICAgICAgWy0xLCAyXSxcbiAgICAgIF0sXG4gICAgXTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRQaXZvdCA9ICh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgIHRoaXMucGl2b3QgPSBbeCwgeV07XG4gIH07XG5cbiAgcHVibGljIGdldFBpdm90ID0gKCk6IFBpZWNlSW50ZXJmYWNlW1wicGl2b3RcIl0gPT4ge1xuICAgIHJldHVybiB0aGlzLnBpdm90O1xuICB9O1xuXG4gIHB1YmxpYyBnZXRNYXRyaXggPSAoKTogUGllY2VJbnRlcmZhY2VbXCJtYXRyaXhcIl0gPT4ge1xuICAgIHJldHVybiB0aGlzLm1hdHJpeDtcbiAgfTtcblxuICBwdWJsaWMgZ2V0Q29sb3IgPSAoKTogUGllY2VJbnRlcmZhY2VbXCJjb2xvclwiXSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gIH07XG5cbiAgcHVibGljIHJvdGF0ZSA9IChkaXI6IDAgfCAxLCBib2FyZE1hdHJpeDogQm9hcmRNYXRyaXgpOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5pZCA9PT0gXCJPXCIpIHJldHVybjtcbiAgICBsZXQgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uTWF0cml4KGRpcik7XG5cbiAgICBsZXQgcm90YXRlZCA9IHRoaXMubWF0cml4Lm1hcCgodGlsZSkgPT4ge1xuICAgICAgcmV0dXJuIG1hdHJpeE11bHRpcGx5KHJvdGF0aW9uLCB0aWxlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY2hhbmdlT3JpZW50YXRpb24oZGlyKTtcblxuICAgIGxldCByb3RhdGlvblN1Y2Nlc3NmdWw6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IFt4LCB5XSBvZiB0aGlzLmtpY2tEYXRhW3RoaXMub3JpZW50YXRpb25dKSB7XG4gICAgICBsZXQga2ljazogYm9vbGVhbiA9IHRoaXMuY2hlY2tLaWNrKHgsIHksIHJvdGF0ZWQsIGJvYXJkTWF0cml4KTtcbiAgICAgIGlmICgha2ljaykge1xuICAgICAgICB0aGlzLmRvS2ljayh4LCB5LCByb3RhdGVkLCBkaXIpO1xuICAgICAgICByb3RhdGlvblN1Y2Nlc3NmdWwgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXJvdGF0aW9uU3VjY2Vzc2Z1bCkge1xuICAgICAgdGhpcy5jaGFuZ2VPcmllbnRhdGlvbihkaXIgPT09IDAgPyAxIDogMCk7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgZ2V0Um90YXRpb25NYXRyaXgoZGlyOiAwIHwgMSk6IG51bWJlcltdW10ge1xuICAgIGxldCByb3RhdGlvbjtcbiAgICBpZiAoZGlyID09PSAwKSB7XG4gICAgICByb3RhdGlvbiA9IFtcbiAgICAgICAgWzAsIDFdLFxuICAgICAgICBbLTEsIDBdLFxuICAgICAgXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcm90YXRpb24gPSBbXG4gICAgICAgIFswLCAtMV0sXG4gICAgICAgIFsxLCAwXSxcbiAgICAgIF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvdGF0aW9uO1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja0tpY2soXG4gICAgeDogbnVtYmVyLFxuICAgIHk6IG51bWJlcixcbiAgICByb3RhdGVkOiBQaWVjZUludGVyZmFjZVtcIm1hdHJpeFwiXSxcbiAgICBib2FyZE1hdHJpeDogQm9hcmRNYXRyaXhcbiAgKTogYm9vbGVhbiB7XG4gICAgbGV0IGtpY2sgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvdGF0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChcbiAgICAgICAgcm90YXRlZFtpXVswXSArIHRoaXMucGl2b3RbMF0gKyB4IDwgMCB8fFxuICAgICAgICByb3RhdGVkW2ldWzBdICsgdGhpcy5waXZvdFswXSArIHggPiA5IHx8XG4gICAgICAgIHJvdGF0ZWRbaV1bMV0gKyB0aGlzLnBpdm90WzFdICsgeSA8IDAgfHxcbiAgICAgICAgcm90YXRlZFtpXVsxXSArIHRoaXMucGl2b3RbMV0gKyB5ID4gMTlcbiAgICAgICkge1xuICAgICAgICBraWNrID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBib2FyZE1hdHJpeFtyb3RhdGVkW2ldWzFdICsgdGhpcy5waXZvdFsxXSArIHldPy5bXG4gICAgICAgICAgcm90YXRlZFtpXVswXSArIHRoaXMucGl2b3RbMF0gKyB4XG4gICAgICAgIF0/LnZhbHVlID09PSAxXG4gICAgICApIHtcbiAgICAgICAga2ljayA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2ljaztcbiAgfVxuXG4gIHByaXZhdGUgZG9LaWNrKFxuICAgIHg6IG51bWJlcixcbiAgICB5OiBudW1iZXIsXG4gICAgcm90YXRlZDogUGllY2VJbnRlcmZhY2VbXCJtYXRyaXhcIl0sXG4gICAgZGlyOiAxIHwgMFxuICApIHtcbiAgICB0aGlzLm1hdHJpeCA9IHJvdGF0ZWQ7XG4gICAgdGhpcy5waXZvdFswXSArPSB4O1xuICAgIHRoaXMucGl2b3RbMV0gKz0geTtcbiAgICB0aGlzLmNoYW5nZU9yaWVudGF0aW9uKGRpcik7XG4gIH1cblxuICBwcml2YXRlIGNoYW5nZU9yaWVudGF0aW9uKGRpcjogMSB8IDApIHtcbiAgICB0aGlzLm9yaWVudGF0aW9uID0gKFxuICAgICAgZGlyID09IDFcbiAgICAgICAgPyAoKCh0aGlzLm9yaWVudGF0aW9uICsgMSkgJSA0KSArIDQpICUgNFxuICAgICAgICA6ICgoKHRoaXMub3JpZW50YXRpb24gLSAxKSAlIDQpICsgNCkgJSA0XG4gICAgKSBhcyB0eXBlb2YgdGhpcy5vcmllbnRhdGlvbjtcbiAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIG1hdHJpeE11bHRpcGx5KGE6IG51bWJlcltdW10sIGI6IG51bWJlcltdKSB7XG4gIGxldCBjID0gW2FbMF1bMF0gKiBiWzBdICsgYVswXVsxXSAqIGJbMV0sIGFbMV1bMF0gKiBiWzBdICsgYVsxXVsxXSAqIGJbMV1dO1xuICByZXR1cm4gYztcbn1cbiIsImltcG9ydCBQaWVjZSBmcm9tIFwiLi9QaWVjZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUUGllY2UgZXh0ZW5kcyBQaWVjZSB7XG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgY29uc3QgaWQgPSBcIlRcIjtcbiAgICBjb25zdCBjb2xvciA9IFwiI2ZmMDBmZlwiO1xuICAgIGxldCBtYXRyaXggPSBbXG4gICAgICBbMCwgLTFdLFxuICAgICAgWy0xLCAwXSxcbiAgICAgIFswLCAwXSxcbiAgICAgIFsxLCAwXSxcbiAgICBdO1xuICAgIHN1cGVyKHtcbiAgICAgIGlkLFxuICAgICAgY29sb3IsXG4gICAgICBwaXZvdDogW3gsIHldLFxuICAgICAgbWF0cml4LFxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUGllY2UgZnJvbSBcIi4vUGllY2VcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSVBpZWNlIGV4dGVuZHMgUGllY2Uge1xuICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgIGNvbnN0IGlkID0gXCJJXCI7XG4gICAgY29uc3QgY29sb3IgPSBcIiMwMGZmZmZcIjtcbiAgICBsZXQgbWF0cml4ID0gW1xuICAgICAgWy0xLjUsIDAuNV0sXG4gICAgICBbLTAuNSwgMC41XSxcbiAgICAgIFswLjUsIDAuNV0sXG4gICAgICBbMS41LCAwLjVdLFxuICAgIF07XG4gICAgc3VwZXIoe1xuICAgICAgaWQsXG4gICAgICBjb2xvcixcbiAgICAgIHBpdm90OiBbeCwgeV0sXG4gICAgICBtYXRyaXgsXG4gICAgfSk7XG4gICAgdGhpcy5raWNrRGF0YSA9IFtcbiAgICAgIFtcbiAgICAgICAgWzAsIDBdLFxuICAgICAgICBbLTEsIDBdLFxuICAgICAgICBbMiwgMF0sXG4gICAgICAgIFstMSwgMF0sXG4gICAgICAgIFsyLCAwXSxcbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFstMSwgMF0sXG4gICAgICAgIFswLCAwXSxcbiAgICAgICAgWzAsIDBdLFxuICAgICAgICBbMCwgMV0sXG4gICAgICAgIFswLCAtMl0sXG4gICAgICBdLFxuICAgICAgW1xuICAgICAgICBbLTEsIDFdLFxuICAgICAgICBbMSwgMV0sXG4gICAgICAgIFstMiwgMV0sXG4gICAgICAgIFsxLCAwXSxcbiAgICAgICAgWy0yLCAwXSxcbiAgICAgIF0sXG4gICAgICBbXG4gICAgICAgIFswLCAxXSxcbiAgICAgICAgWzAsIDFdLFxuICAgICAgICBbMCwgMV0sXG4gICAgICAgIFswLCAtMV0sXG4gICAgICAgIFswLCAyXSxcbiAgICAgIF0sXG4gICAgXTtcbiAgfVxufVxuIiwiaW1wb3J0IFBpZWNlIGZyb20gXCIuL1BpZWNlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9QaWVjZSBleHRlbmRzIFBpZWNlIHtcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICBjb25zdCBpZCA9IFwiT1wiO1xuICAgIGNvbnN0IGNvbG9yID0gXCIjZmZmZjAwXCI7XG4gICAgbGV0IG1hdHJpeCA9IFtcbiAgICAgIFstMSwgMF0sXG4gICAgICBbMCwgMF0sXG4gICAgICBbLTEsIC0xXSxcbiAgICAgIFswLCAtMV0sXG4gICAgXTtcbiAgICBzdXBlcih7XG4gICAgICBpZCxcbiAgICAgIGNvbG9yLFxuICAgICAgcGl2b3Q6IFt4LCB5XSxcbiAgICAgIG1hdHJpeCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyByb3RhdGUgPSAoKTogdm9pZCA9PiB7XG4gICAgcmV0dXJuO1xuICB9O1xufVxuIiwiaW1wb3J0IFBpZWNlIGZyb20gXCIuL1BpZWNlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRQaWVjZSBleHRlbmRzIFBpZWNlIHtcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICBjb25zdCBpZCA9IFwiU1wiO1xuICAgIGNvbnN0IGNvbG9yID0gXCIjMDBmZjAwXCI7XG4gICAgbGV0IG1hdHJpeCA9IFtcbiAgICAgIFstMSwgMF0sXG4gICAgICBbMCwgMF0sXG4gICAgICBbMCwgLTFdLFxuICAgICAgWzEsIC0xXSxcbiAgICBdO1xuICAgIHN1cGVyKHtcbiAgICAgIGlkLFxuICAgICAgY29sb3IsXG4gICAgICBwaXZvdDogW3gsIHldLFxuICAgICAgbWF0cml4LFxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUGllY2UgZnJvbSBcIi4vUGllY2VcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVFBpZWNlIGV4dGVuZHMgUGllY2Uge1xuICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgIGNvbnN0IGlkID0gXCJKXCI7XG4gICAgY29uc3QgY29sb3IgPSBcIiMwMDAwZmZcIjtcbiAgICBsZXQgbWF0cml4ID0gW1xuICAgICAgWy0xLCAwXSxcbiAgICAgIFswLCAwXSxcbiAgICAgIFsxLCAwXSxcbiAgICAgIFstMSwgLTFdLFxuICAgIF07XG4gICAgc3VwZXIoe1xuICAgICAgaWQsXG4gICAgICBjb2xvcixcbiAgICAgIHBpdm90OiBbeCwgeV0sXG4gICAgICBtYXRyaXgsXG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQaWVjZSBmcm9tIFwiLi9QaWVjZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUUGllY2UgZXh0ZW5kcyBQaWVjZSB7XG4gIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgY29uc3QgaWQgPSBcIlpcIjtcbiAgICBjb25zdCBjb2xvciA9IFwiI2ZmMDAwMFwiO1xuICAgIGxldCBtYXRyaXggPSBbXG4gICAgICBbLTEsIC0xXSxcbiAgICAgIFswLCAwXSxcbiAgICAgIFswLCAtMV0sXG4gICAgICBbMSwgMF0sXG4gICAgXTtcbiAgICBzdXBlcih7XG4gICAgICBpZCxcbiAgICAgIGNvbG9yLFxuICAgICAgcGl2b3Q6IFt4LCB5XSxcbiAgICAgIG1hdHJpeCxcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBpZWNlIGZyb20gXCIuL1BpZWNlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRQaWVjZSBleHRlbmRzIFBpZWNlIHtcbiAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICBjb25zdCBpZCA9IFwiTFwiO1xuICAgIGNvbnN0IGNvbG9yID0gXCIjZmY3ZjAwXCI7XG4gICAgbGV0IG1hdHJpeCA9IFtcbiAgICAgIFstMSwgMF0sXG4gICAgICBbMCwgMF0sXG4gICAgICBbMSwgMF0sXG4gICAgICBbMSwgLTFdLFxuICAgIF07XG4gICAgc3VwZXIoe1xuICAgICAgaWQsXG4gICAgICBjb2xvcixcbiAgICAgIHBpdm90OiBbeCwgeV0sXG4gICAgICBtYXRyaXgsXG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNjb3Jpbmcge1xuICBwcml2YXRlIHNjb3JlOiBudW1iZXI7XG4gIHByaXZhdGUgYmFzZVNjb3JlTWFwOiBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+O1xuICBwcml2YXRlIGRpc3BsYXk6IEhUTUxFbGVtZW50O1xuXG4gIGNvbnN0cnVjdG9yKGRpc3BsYXk6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICB0aGlzLnNjb3JlID0gMDtcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKTtcbiAgICB0aGlzLmJhc2VTY29yZU1hcCA9IHtcbiAgICAgIDA6IDAsXG4gICAgICAxOiA0MCxcbiAgICAgIDI6IDEwMCxcbiAgICAgIDM6IDIwMCxcbiAgICAgIDQ6IDEyMDAsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlRGlzcGxheSA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLmRpc3BsYXkuaW5uZXJUZXh0ID0gdGhpcy5zY29yZS50b1N0cmluZygpO1xuICB9O1xuXG4gIHB1YmxpYyBnZXRTY29yZSA9ICgpOiBudW1iZXIgPT4gdGhpcy5zY29yZTtcblxuICBwdWJsaWMgYWRkU2NvcmUgPSAoY2xlYXJlZExpbmVzOiBudW1iZXIsIGxldmVsOiBudW1iZXIpID0+IHtcbiAgICB0aGlzLnNjb3JlICs9IHRoaXMuYmFzZVNjb3JlTWFwW2NsZWFyZWRMaW5lc10gKiAobGV2ZWwgKyAxKTtcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKTtcbiAgfTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIExldmVsIHtcbiAgcHJpdmF0ZSBjdXJyZW50TGV2ZWw6IG51bWJlcjtcbiAgcHJpdmF0ZSBzdGFydGluZ0xldmVsOiBudW1iZXI7XG4gIHByaXZhdGUgbGluZXNGb3JOZXh0TGV2ZWxVcDogbnVtYmVyO1xuICBwcml2YXRlIGxldmVsU3BlZWRMaXN0OiBudW1iZXJbXTtcbiAgcHJpdmF0ZSBkaXNwbGF5OiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihzdGFydGluZ0xldmVsOiBudW1iZXIsIGRpc3BsYXk6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICB0aGlzLnN0YXJ0aW5nTGV2ZWwgPSBzdGFydGluZ0xldmVsO1xuICAgIHRoaXMuY3VycmVudExldmVsID0gc3RhcnRpbmdMZXZlbDtcbiAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKTtcbiAgICB0aGlzLmxpbmVzRm9yTmV4dExldmVsVXAgPSBNYXRoLm1pbihcbiAgICAgIHRoaXMuc3RhcnRpbmdMZXZlbCAqIDEwICsgMTAsXG4gICAgICBNYXRoLm1heCgxMDAsIHRoaXMuc3RhcnRpbmdMZXZlbCAqIDEwIC0gNTApXG4gICAgKTtcbiAgICB0aGlzLmxldmVsU3BlZWRMaXN0ID0gW1xuICAgICAgODAwLCA3MTcsIDYzMywgNTUwLCA0NjcsIDM4MywgMzAwLCAyMTcsIDEzMywgMTAwLCA4MywgODMsIDgzLCA2NywgNjcsIDY3LFxuICAgICAgNTAsIDUwLCA1MCwgMzMsIDMzLCAzMywgMzMsIDMzLCAzMywgMzMsIDMzLCAzMywgMzMsIDE3LFxuICAgIF07XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZURpc3BsYXkgPSAoKTogdm9pZCA9PiB7XG4gICAgdGhpcy5kaXNwbGF5LmlubmVyVGV4dCA9IHRoaXMuY3VycmVudExldmVsLnRvU3RyaW5nKCk7XG4gIH07XG5cbiAgcHVibGljIGdldEN1cnJlbnRMZXZlbCA9ICgpOiBudW1iZXIgPT4gdGhpcy5jdXJyZW50TGV2ZWw7XG5cbiAgcHVibGljIHVwZGF0ZUxldmVsID0gKHRvdGFsTGluZXNDbGVhcmVkOiBudW1iZXIpOiB2b2lkID0+IHtcbiAgICBpZiAodG90YWxMaW5lc0NsZWFyZWQgPj0gdGhpcy5saW5lc0Zvck5leHRMZXZlbFVwKSB7XG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbCsrO1xuICAgICAgdGhpcy5saW5lc0Zvck5leHRMZXZlbFVwICs9IDEwO1xuXG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKTtcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIGdldEN1cnJlbnRTcGVlZCA9ICgpOiBudW1iZXIgPT5cbiAgICB0aGlzLmN1cnJlbnRMZXZlbCA+PSAyOVxuICAgICAgPyB0aGlzLmxldmVsU3BlZWRMaXN0WzI5XVxuICAgICAgOiB0aGlzLmxldmVsU3BlZWRMaXN0W3RoaXMuY3VycmVudExldmVsXTtcbn1cbiIsImltcG9ydCBHYW1lIGZyb20gXCIuL0dhbWVcIjtcblxuY29uc3QgZ2FtZSA9IG5ldyBHYW1lKDYpO1xuZ2FtZS5zdGFydEdhbWUoKTtcbiIsImltcG9ydCBCb2FyZCBmcm9tIFwiLi9Cb2FyZC9Cb2FyZFwiO1xuaW1wb3J0IFBpZWNlIGZyb20gXCIuL1BpZWNlL1BpZWNlXCI7XG5pbXBvcnQgVFBpZWNlIGZyb20gXCIuL1BpZWNlL1RQaWVjZVwiO1xuaW1wb3J0IElQaWVjZSBmcm9tIFwiLi9QaWVjZS9JUGllY2VcIjtcbmltcG9ydCBPUGllY2UgZnJvbSBcIi4vUGllY2UvT1BpZWNlXCI7XG5pbXBvcnQgU1BpZWNlIGZyb20gXCIuL1BpZWNlL1NQaWVjZVwiO1xuaW1wb3J0IEpQaWVjZSBmcm9tIFwiLi9QaWVjZS9KUGllY2VcIjtcbmltcG9ydCBaUGllY2UgZnJvbSBcIi4vUGllY2UvWlBpZWNlXCI7XG5pbXBvcnQgTFBpZWNlIGZyb20gXCIuL1BpZWNlL0xQaWVjZVwiO1xuaW1wb3J0IFNjb3JpbmcgZnJvbSBcIi4vU2NvcmluZy9TY29yaW5nXCI7XG5pbXBvcnQgTGV2ZWwgZnJvbSBcIi4vTGV2ZWwvTGV2ZWxcIjtcblxuY2xhc3MgR2FtZSB7XG4gIHByaXZhdGUgYm9hcmQ6IEJvYXJkO1xuICBwcml2YXRlIHNjb3Jpbmc6IFNjb3Jpbmc7XG4gIHByaXZhdGUgbGV2ZWw6IExldmVsO1xuICBwcml2YXRlIGhpc3Rvcnk6IG51bWJlciA9IDk5O1xuICBwcml2YXRlIGN1cnJlbnRQaWVjZTogUGllY2U7XG4gIHByaXZhdGUgbmV4dFBpZWNlOiBQaWVjZTtcbiAgcHJpdmF0ZSB0aW1lb3V0OiBOb2RlSlMuVGltZW91dCB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBzdG9wcGVkOiBib29sZWFuO1xuICBwcml2YXRlIGN1cnJlbnRTcGVlZDogbnVtYmVyO1xuICBwcml2YXRlIGlzU29mdERyb3BwaW5nOiBib29sZWFuO1xuICBwcml2YXRlIGxhc3RVcGRhdGVUaW1lOiBudW1iZXI7XG4gIHByaXZhdGUgYWNjdW11bGF0ZWRUaW1lOiBudW1iZXI7XG4gIHByaXZhdGUgZnJhbWVSZXF1ZXN0SGFuZGxlOiBudW1iZXIgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHN0YXJ0aW5nTGV2ZWw6IG51bWJlciA9IDApIHtcbiAgICB0aGlzLmxhc3RVcGRhdGVUaW1lID0gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpO1xuICAgIHRoaXMuYm9hcmQgPSBuZXcgQm9hcmQoXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiY2FudmFzXCIpIGFzIEhUTUxDYW52YXNFbGVtZW50XG4gICAgKTtcbiAgICB0aGlzLnNjb3JpbmcgPSBuZXcgU2NvcmluZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjb3JlXCIpIGFzIEhUTUxFbGVtZW50KTtcbiAgICB0aGlzLmxldmVsID0gbmV3IExldmVsKFxuICAgICAgc3RhcnRpbmdMZXZlbCxcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY3VycmVudExldmVsXCIpIGFzIEhUTUxFbGVtZW50XG4gICAgKTtcbiAgICB0aGlzLmN1cnJlbnRTcGVlZCA9IHRoaXMubGV2ZWwuZ2V0Q3VycmVudFNwZWVkKCk7XG4gICAgdGhpcy5uZXh0UGllY2UgPSB0aGlzLmdlbmVyYXRlUmFuZG9tUGllY2UoKTtcbiAgICB0aGlzLmN1cnJlbnRQaWVjZSA9IHRoaXMuZ2VuZXJhdGVSYW5kb21QaWVjZSgpO1xuICAgIHRoaXMuaXNTb2Z0RHJvcHBpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmFjY3VtdWxhdGVkVGltZSA9IDA7XG4gICAgdGhpcy5mcmFtZVJlcXVlc3RIYW5kbGUgPSBudWxsO1xuICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlS2V5RG93bik7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmhhbmRsZUtleVVwKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlS2V5RG93biA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgY29uc3QgYm9hcmRNYXRyaXggPSB0aGlzLmJvYXJkLmdldE1hdHJpeCgpO1xuXG4gICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICB0aGlzLnRyeU1vdmUoLTEsIDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XG4gICAgICAgIHRoaXMudHJ5TW92ZSgxLCAwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiQXJyb3dEb3duXCI6XG4gICAgICAgIHRoaXMuc3RhcnRTb2Z0RHJvcCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJBcnJvd1VwXCI6XG4gICAgICBjYXNlIFwiY1wiOlxuICAgICAgICB0aGlzLmN1cnJlbnRQaWVjZS5yb3RhdGUoMSwgYm9hcmRNYXRyaXgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCIgXCI6XG4gICAgICAgIHRoaXMuY3VycmVudFBpZWNlLnJvdGF0ZSgwLCBib2FyZE1hdHJpeCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucmVkcmF3R2FtZUJvYXJkKCk7XG4gIH07XG5cbiAgcHJpdmF0ZSBoYW5kbGVLZXlVcCA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIkFycm93RG93blwiKSB7XG4gICAgICB0aGlzLnN0b3BTb2Z0RHJvcCgpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIHRyeU1vdmUgPSAoeE9mZnNldDogbnVtYmVyLCB5T2Zmc2V0OiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBtYXRyaXggPSB0aGlzLmN1cnJlbnRQaWVjZS5nZXRNYXRyaXgoKTtcbiAgICBjb25zdCBwaXZvdCA9IHRoaXMuY3VycmVudFBpZWNlLmdldFBpdm90KCk7XG4gICAgbGV0IGZsYWcgPSBtYXRyaXguZXZlcnkoKHRpbGUpID0+IHtcbiAgICAgIGNvbnN0IG5ld1ggPSB0aWxlWzBdICsgcGl2b3RbMF0gKyB4T2Zmc2V0O1xuICAgICAgY29uc3QgbmV3WSA9IHRpbGVbMV0gKyBwaXZvdFsxXSArIHlPZmZzZXQ7XG4gICAgICByZXR1cm4gdGhpcy5pc1Bvc2l0aW9uVmFsaWQobmV3WCwgbmV3WSk7XG4gICAgfSk7XG5cbiAgICBpZiAoZmxhZykge1xuICAgICAgdGhpcy5jdXJyZW50UGllY2Uuc2V0UGl2b3QocGl2b3RbMF0gKyB4T2Zmc2V0LCBwaXZvdFsxXSArIHlPZmZzZXQpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIGlzUG9zaXRpb25WYWxpZCA9ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGJvYXJkTWF0cml4ID0gdGhpcy5ib2FyZC5nZXRNYXRyaXgoKTtcbiAgICByZXR1cm4geCA+PSAwICYmIHggPD0gOSAmJiB5IDw9IDE5ICYmIGJvYXJkTWF0cml4W3ldPy5beF0/LnZhbHVlICE9PSAxO1xuICB9O1xuXG4gIHByaXZhdGUgc3RhcnRTb2Z0RHJvcCA9ICgpOiB2b2lkID0+IHtcbiAgICBpZiAoIXRoaXMuaXNTb2Z0RHJvcHBpbmcpIHtcbiAgICAgIHRoaXMudXBkYXRlQ3VycmVudFNwZWVkKE1hdGgubWluKDEwMCwgdGhpcy5sZXZlbC5nZXRDdXJyZW50U3BlZWQoKSAvIDIpKTtcbiAgICAgIHRoaXMuaXNTb2Z0RHJvcHBpbmcgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIHN0b3BTb2Z0RHJvcCA9ICgpOiB2b2lkID0+IHtcbiAgICB0aGlzLnVwZGF0ZUN1cnJlbnRTcGVlZCh0aGlzLmxldmVsLmdldEN1cnJlbnRTcGVlZCgpKTtcbiAgICB0aGlzLmlzU29mdERyb3BwaW5nID0gZmFsc2U7XG4gIH07XG5cbiAgcHJpdmF0ZSBjYW5Ecm9wID0gKCkgPT4ge1xuICAgIGNvbnN0IGJvYXJkTWF0cml4ID0gdGhpcy5ib2FyZC5nZXRNYXRyaXgoKTtcbiAgICBjb25zdCBtYXRyaXggPSB0aGlzLmN1cnJlbnRQaWVjZS5nZXRNYXRyaXgoKTtcbiAgICBjb25zdCBwaXZvdCA9IHRoaXMuY3VycmVudFBpZWNlLmdldFBpdm90KCk7XG4gICAgcmV0dXJuIG1hdHJpeC5ldmVyeSgodGlsZSkgPT4ge1xuICAgICAgY29uc3QgbmV3WSA9IHRpbGVbMV0gKyBwaXZvdFsxXSArIDE7XG4gICAgICByZXR1cm4gbmV3WSA8PSAxOSAmJiBib2FyZE1hdHJpeFtuZXdZXT8uW3RpbGVbMF0gKyBwaXZvdFswXV0/LnZhbHVlICE9PSAxO1xuICAgIH0pO1xuICB9O1xuXG4gIHByaXZhdGUgcmVkcmF3R2FtZUJvYXJkID0gKCkgPT4ge1xuICAgIHRoaXMuYm9hcmQuZHJhdygpO1xuICAgIHRoaXMuYm9hcmQuZHJhd1BpZWNlKHRoaXMuY3VycmVudFBpZWNlKTtcbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZUN1cnJlbnRTcGVlZCA9IChzcGVlZDogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgdGhpcy5jdXJyZW50U3BlZWQgPSBzcGVlZDtcbiAgfTtcblxuICBwdWJsaWMgc3RhcnRHYW1lID0gKCkgPT4ge1xuICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuICAgIGNvbnNvbGUubG9nKFwiU1RBUlRFRFwiKTtcbiAgICB0aGlzLnNwYXduKCk7XG4gICAgdGhpcy5zdGFydERyb3BMb29wKCk7XG4gIH07XG5cbiAgcHJpdmF0ZSBzdGFydERyb3BMb29wID0gKCk6IHZvaWQgPT4ge1xuICAgIHRoaXMuZnJhbWVSZXF1ZXN0SGFuZGxlID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZHJvcExvb3ApO1xuICB9O1xuXG4gIHByaXZhdGUgZHJvcExvb3AgPSAodGltZXN0YW1wOiBudW1iZXIpOiB2b2lkID0+IHtcbiAgICBjb25zdCBkZWx0YVRpbWUgPSB0aW1lc3RhbXAgLSB0aGlzLmxhc3RVcGRhdGVUaW1lO1xuICAgIHRoaXMubGFzdFVwZGF0ZVRpbWUgPSB0aW1lc3RhbXA7XG4gICAgdGhpcy5hY2N1bXVsYXRlZFRpbWUgKz0gZGVsdGFUaW1lO1xuXG4gICAgLy8gVXNlIGN1cnJlbnRTcGVlZCB0byBkZXRlcm1pbmUgbG9naWMgdXBkYXRlIGZyZXF1ZW5jeVxuICAgIHdoaWxlICh0aGlzLmFjY3VtdWxhdGVkVGltZSA+IHRoaXMuY3VycmVudFNwZWVkKSB7XG4gICAgICBpZiAodGhpcy5jYW5Ecm9wKCkpIHtcbiAgICAgICAgdGhpcy5kcm9wKCk7XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLnRpbWVvdXQpIHtcbiAgICAgICAgdGhpcy5xdWV1ZVN0b3AoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYWNjdW11bGF0ZWRUaW1lIC09IHRoaXMuY3VycmVudFNwZWVkO1xuICAgIH1cblxuICAgIHRoaXMucmVkcmF3R2FtZUJvYXJkKCk7XG4gICAgaWYgKCF0aGlzLnN0b3BwZWQpIHtcbiAgICAgIHRoaXMuc3RhcnREcm9wTG9vcCgpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIHNwYXduID0gKCkgPT4ge1xuICAgIHRoaXMuY3VycmVudFBpZWNlID0gdGhpcy5uZXh0UGllY2U7XG4gICAgdGhpcy5uZXh0UGllY2UgPSB0aGlzLmdlbmVyYXRlUmFuZG9tUGllY2UoKTtcbiAgICB0aGlzLmJvYXJkLmRyYXdQaWVjZSh0aGlzLmN1cnJlbnRQaWVjZSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBkcm9wID0gKCkgPT4ge1xuICAgIGNvbnN0IHBpdm90ID0gdGhpcy5jdXJyZW50UGllY2UuZ2V0UGl2b3QoKTtcbiAgICB0aGlzLmN1cnJlbnRQaWVjZS5zZXRQaXZvdChwaXZvdFswXSwgcGl2b3RbMV0gKyAxKTtcbiAgICB0aGlzLnJlZHJhd0dhbWVCb2FyZCgpO1xuICB9O1xuXG4gIHByaXZhdGUgcXVldWVTdG9wID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLnRpbWVvdXQpIHJldHVybjtcbiAgICBjb25zb2xlLmxvZyhcIlNUT1BQSU5HXCIpO1xuICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5zdG9wLCAxMDAwKTtcbiAgfTtcblxuICBwcml2YXRlIHN0b3AgPSAoKTogdm9pZCA9PiB7XG4gICAgY29uc29sZS5sb2coXCJTVE9QUEVEXCIpO1xuICAgIHRoaXMuY2xlYXJTdG9wVGltZW91dCgpO1xuICAgIGlmICh0aGlzLmNhbkRyb3AoKSkge1xuICAgICAgY29uc29sZS5sb2coXCJTVE9QIENBTkNFTExFRFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5jbGVhckRyb3BJbnRlcnZhbCgpO1xuICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgdGhpcy5oYW5kbGVQb3N0T3BzKCk7XG4gICAgaWYgKHRoaXMuYm9hcmQubWF4SGVpZ2h0UmVhY2hlZCgpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkdBTUUgT1ZFUlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFydEdhbWUoKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBoYW5kbGVQb3N0T3BzID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiQURESU5HIFRPIEJPQVJEXCIpO1xuICAgIHRoaXMuYm9hcmQuYWRkVG9TdGFjayh0aGlzLmN1cnJlbnRQaWVjZSk7XG4gICAgY29uc29sZS5sb2coXCJDTEVBUklORyBMSU5FU1wiKTtcbiAgICBjb25zdCBjbGVhcmVkTGluZXMgPSB0aGlzLmJvYXJkLmNsZWFyTGluZSgpO1xuICAgIHRoaXMuc2NvcmluZy5hZGRTY29yZShjbGVhcmVkTGluZXMsIHRoaXMubGV2ZWwuZ2V0Q3VycmVudExldmVsKCkpO1xuICAgIHRoaXMubGV2ZWwudXBkYXRlTGV2ZWwodGhpcy5ib2FyZC5nZXRUb3RhbExpbmVzQ2xlYXJlZCgpKTtcbiAgICB0aGlzLnVwZGF0ZUN1cnJlbnRTcGVlZCh0aGlzLmxldmVsLmdldEN1cnJlbnRTcGVlZCgpKTtcbiAgfTtcblxuICBwcml2YXRlIGNsZWFyRHJvcEludGVydmFsID0gKCk6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLmZyYW1lUmVxdWVzdEhhbmRsZSkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5mcmFtZVJlcXVlc3RIYW5kbGUpO1xuICAgICAgdGhpcy5mcmFtZVJlcXVlc3RIYW5kbGUgPSBudWxsO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIGNsZWFyU3RvcFRpbWVvdXQgPSAoKTogdm9pZCA9PiB7XG4gICAgaWYgKHRoaXMudGltZW91dCkgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgdGhpcy50aW1lb3V0ID0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIHByaXZhdGUgcmFuZG9taXplciA9ICgpOiBudW1iZXIgPT4ge1xuICAgIGxldCByYW5kb20gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3KTtcbiAgICB3aGlsZSAocmFuZG9tID09PSB0aGlzLmhpc3RvcnkpIHtcbiAgICAgIHJhbmRvbSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpO1xuICAgIH1cbiAgICB0aGlzLmhpc3RvcnkgPSByYW5kb207XG4gICAgcmV0dXJuIHJhbmRvbTtcbiAgfTtcblxuICBwcml2YXRlIGdlbmVyYXRlUmFuZG9tUGllY2UgPSAoKTogUGllY2UgPT4ge1xuICAgIGNvbnN0IHJhbmRvbSA9IHRoaXMucmFuZG9taXplcigpO1xuICAgIGxldCBwaWVjZTogUGllY2U7XG4gICAgc3dpdGNoIChyYW5kb20pIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcGllY2UgPSBuZXcgVFBpZWNlKDUsIDApO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcGllY2UgPSBuZXcgSVBpZWNlKDQuNSwgLTAuNSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBwaWVjZSA9IG5ldyBKUGllY2UoNSwgMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBwaWVjZSA9IG5ldyBMUGllY2UoNSwgMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0OlxuICAgICAgICBwaWVjZSA9IG5ldyBTUGllY2UoNSwgMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA1OlxuICAgICAgICBwaWVjZSA9IG5ldyBPUGllY2UoNSwgMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcGllY2UgPSBuZXcgWlBpZWNlKDUsIDApO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHBpZWNlO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBHYW1lO1xuIl0sIm5hbWVzIjpbImNhbnZhcyIsInNjYWxlIiwiZHJhd1RpbGUiLCJ4IiwieSIsImNvbG9yIiwiY3R4IiwiZmlsbFN0eWxlIiwic3Ryb2tlU3R5bGUiLCJnbG9iYWxBbHBoYSIsImZpbGxSZWN0Iiwic3Ryb2tlUmVjdCIsImRyYXdQaWVjZSIsInBpZWNlIiwiZ2V0UGl2b3QiLCJnZXRDb2xvciIsImdldE1hdHJpeCIsInBpdm90IiwiZm9yRWFjaCIsInRpbGUiLCJkcmF3IiwiY2xlYXIiLCJjZWxsIiwibWF0cml4IiwidmFsdWUiLCJnZXRDdHgiLCJjbGVhclJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImNsZWFyTGluZSIsImxpbmVzVG9DbGVhciIsImV2ZXJ5IiwicHVzaCIsImkiLCJsZW5ndGgiLCJBcnJheSIsImZyb20iLCJ0b3RhbExpbmVzQ2xlYXJlZCIsIm1heEhlaWdodFJlYWNoZWQiLCJzb21lIiwiYWRkVG9TdGFjayIsImdldFRvdGFsTGluZXNDbGVhcmVkIiwidGhpcyIsImdldENvbnRleHQiLCJpZCIsInNldFBpdm90Iiwicm90YXRlIiwiZGlyIiwiYm9hcmRNYXRyaXgiLCJyb3RhdGlvbiIsImdldFJvdGF0aW9uTWF0cml4Iiwicm90YXRlZCIsIm1hcCIsImIiLCJhIiwiY2hhbmdlT3JpZW50YXRpb24iLCJyb3RhdGlvblN1Y2Nlc3NmdWwiLCJraWNrRGF0YSIsIm9yaWVudGF0aW9uIiwiY2hlY2tLaWNrIiwiZG9LaWNrIiwia2ljayIsImRpc3BsYXkiLCJ1cGRhdGVEaXNwbGF5IiwiaW5uZXJUZXh0Iiwic2NvcmUiLCJ0b1N0cmluZyIsImdldFNjb3JlIiwiYWRkU2NvcmUiLCJjbGVhcmVkTGluZXMiLCJsZXZlbCIsImJhc2VTY29yZU1hcCIsInN0YXJ0aW5nTGV2ZWwiLCJjdXJyZW50TGV2ZWwiLCJnZXRDdXJyZW50TGV2ZWwiLCJ1cGRhdGVMZXZlbCIsImxpbmVzRm9yTmV4dExldmVsVXAiLCJnZXRDdXJyZW50U3BlZWQiLCJsZXZlbFNwZWVkTGlzdCIsIk1hdGgiLCJtaW4iLCJtYXgiLCJoaXN0b3J5IiwiaGFuZGxlS2V5RG93biIsImUiLCJib2FyZCIsImtleSIsInRyeU1vdmUiLCJzdGFydFNvZnREcm9wIiwiY3VycmVudFBpZWNlIiwicmVkcmF3R2FtZUJvYXJkIiwiaGFuZGxlS2V5VXAiLCJzdG9wU29mdERyb3AiLCJ4T2Zmc2V0IiwieU9mZnNldCIsIm5ld1giLCJuZXdZIiwiaXNQb3NpdGlvblZhbGlkIiwiaXNTb2Z0RHJvcHBpbmciLCJ1cGRhdGVDdXJyZW50U3BlZWQiLCJjYW5Ecm9wIiwic3BlZWQiLCJjdXJyZW50U3BlZWQiLCJzdGFydEdhbWUiLCJzdG9wcGVkIiwiY29uc29sZSIsImxvZyIsInNwYXduIiwic3RhcnREcm9wTG9vcCIsImZyYW1lUmVxdWVzdEhhbmRsZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRyb3BMb29wIiwidGltZXN0YW1wIiwiZGVsdGFUaW1lIiwibGFzdFVwZGF0ZVRpbWUiLCJhY2N1bXVsYXRlZFRpbWUiLCJkcm9wIiwidGltZW91dCIsInF1ZXVlU3RvcCIsIm5leHRQaWVjZSIsImdlbmVyYXRlUmFuZG9tUGllY2UiLCJzZXRUaW1lb3V0Iiwic3RvcCIsImNsZWFyU3RvcFRpbWVvdXQiLCJjbGVhckRyb3BJbnRlcnZhbCIsImhhbmRsZVBvc3RPcHMiLCJzY29yaW5nIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJjbGVhclRpbWVvdXQiLCJ1bmRlZmluZWQiLCJyYW5kb21pemVyIiwicmFuZG9tIiwiZmxvb3IiLCJKUGllY2UiLCJMUGllY2UiLCJTUGllY2UiLCJaUGllY2UiLCJ3aW5kb3ciLCJwZXJmb3JtYW5jZSIsIm5vdyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciJdLCJzb3VyY2VSb290IjoiIn0=